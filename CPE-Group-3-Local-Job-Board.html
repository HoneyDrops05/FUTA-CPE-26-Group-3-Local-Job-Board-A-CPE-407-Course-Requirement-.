<!DOCTYPE html>
<!-- 
  HTML5 document declaration. The `class="light"` attribute sets the default 
  theme to light mode, which can be toggled via JavaScript for dark mode support.
  `lang="en"` specifies English language content for accessibility and SEO.
-->
<html class="light" lang="en">
<head>
    <!-- 
      Character encoding declaration: UTF-8 ensures proper rendering of 
      international characters and symbols.
    -->
    <meta charset="utf-8"/>
    <!--
      Viewport configuration: Ensures proper responsive behavior on mobile devices
      by setting initial scale to 1.0 and width to device width.
    -->
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <!-- 
      Page title displayed in browser tab and search results.
      Indicates this is a job board application with local scope.
    -->
    <title>Local Job Board</title>
    
    <!-- 
      Tailwind CSS CDN with forms and container queries plugins.
      Forms plugin adds base styles for form elements.
      Container queries enable responsive design based on container size.
    -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <!--
      Google Fonts: Inter font family with weights 400-700 for typography.
      Used throughout the application for consistent text rendering.
    -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
    
    <!--
      Material Symbols Outlined icon font from Google Fonts.
      Provides scalable vector icons for UI elements.
      Configuration: weight range 100-700, fill range 0-1.
    -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    
    <!--
      Tailwind CSS configuration script.
      Extends default Tailwind theme with custom colors, fonts, and border radius.
      Enables dark mode via CSS class strategy.
    -->
    <script id="tailwind-config">
        tailwind.config = {
            // Dark mode implementation using CSS class strategy
            // The application toggles between 'light' and 'dark' classes on html element
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        // Primary brand color used for buttons, links, and accents
                        "primary": "#195de6",
                        // Light theme background color
                        "background-light": "#f6f6f8",
                        // Dark theme background color
                        "background-dark": "#111621",
                    },
                    fontFamily: {
                        // Main font family for all text elements
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        // Custom border radius scale for consistent UI rounding
                        "DEFAULT": "1rem",      // Default radius for most elements
                        "lg": "1.5rem",         // Large radius for cards and containers
                        "xl": "2rem",           // Extra large for special elements
                        "full": "9999px"        // Full rounding for circular elements
                    },
                },
            },
        }
    </script>
    
    <!--
      Application-specific CSS styles.
      Contains:
      1. Base styles and utilities
      2. UI component states and transitions
      3. Browser-specific fixes and overrides
      4. Custom component styles
    -->
    <style>
        /* 
          Base body font family and tap highlight removal.
          -webkit-tap-highlight-color prevents the default blue highlight on mobile taps.
        */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* 
          Utility class to hide scrollbar while maintaining scroll functionality.
          Used for scrollable containers where visible scrollbar is not desired.
        */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        
        /*
          Glassmorphism effect for navigation elements.
          Creates a semi-transparent background with backdrop blur.
          Used for sticky headers or floating navigation.
        */
        .nav-blur {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        /*
          Material icons configuration.
          Sets default icon appearance: unfilled, normal weight, 24px optical size.
        */
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        
        /*
          Slide-over panel animation (typically for mobile navigation or side panels).
          Initially positioned off-screen to the left (-100%).
          Active class slides it into view (translateX(0)).
          Used for mobile-first navigation patterns.
        */
        .slide-over {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }
        .slide-over.active {
            transform: translateX(0);
        }
        
        /*
          Overlay for modal backgrounds and dimming effects.
          Uses visibility and opacity for smooth fade transitions.
          Active class makes overlay visible and opaque.
        */
        .overlay {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
        }
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /*
          View management for job listings and details.
          Multiple job views can exist; only the active one is displayed.
          Used for switching between list view, grid view, or detail view.
        */
        .jobs-view {
            display: none;
        }
        .jobs-view.active {
            display: block;
        }
        
        /*
          Screen management for multi-step forms or application flows.
          Only one screen is active at a time; others are hidden.
          Used for wizard interfaces or tabbed content.
        */
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }
        
        /* 
          CRITICAL: Input Border Bug Fix - Comprehensive Fix
          Removes all default borders, outlines, and shadows from form inputs
          to prevent inconsistent browser rendering. Custom styling is applied
          via Tailwind classes instead.
        */
        input, textarea {
            outline: none;
            border: none;
            box-shadow: none;
        }
        /* Ensure we don't break intentional focus states */
        input:focus, textarea:focus {
            outline: none !important;
            box-shadow: none !important;
            border: none !important;
        }
        
        /*
          Browser-specific fixes for input elements:
          - Removes spinner buttons from number inputs (Chrome/Safari)
          - Removes search decoration elements
        */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button,
        input::-webkit-search-decoration,
        input::-webkit-search-cancel-button,
        input::-webkit-search-results-button,
        input::-webkit-search-results-decoration {
            -webkit-appearance: none;
            margin: 0;
        }
        
        /*
          Autofill styling fixes for light and dark modes.
          Prevents browser's default autofill background colors from conflicting
          with theme styling. Maintains proper text color contrast in both modes.
        */
        input:-webkit-autofill,
        input:-webkit-autofill:hover, 
        input:-webkit-autofill:focus, 
        input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px white inset !important;
            box-shadow: 0 0 0 30px white inset !important;
            -webkit-text-fill-color: #0e121b !important;
            transition: background-color 5000s ease-in-out 0s;
        }
        .dark input:-webkit-autofill,
        .dark input:-webkit-autofill:hover, 
        .dark input:-webkit-autofill:focus, 
        .dark input:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px #1f2937 inset !important;
            box-shadow: 0 0 0 30px #1f2937 inset !important;
            -webkit-text-fill-color: #f8f9fc !important;
        }
        
        /*
          Minimum body height ensures content area is at least as tall as the viewport
          or 884px (common screen height), whichever is larger. Prevents awkward short
          pages on large screens.
        */
        body {
            min-height: max(884px, 100dvh);
        }
        
        /*
          Visual indicator for jobs the user has already applied to.
          Green background with white text, small rounded badge style.
          Applied via JavaScript based on application state.
        */
        .applied-badge {
            background-color: #10b981;
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }
        
        /*
          Active state for filter chips/categories in job filtering interface.
          Changes background to primary brand color and text to white when active.
          Indicates currently applied filter to the user.
        */
        .filter-chip.active {
            background-color: #195de6;
            color: white;
        }
    </style>
</head>
<!--
  Body element with comprehensive Tailwind classes for styling:
  - Theme-aware background colors (light/dark)
  - Font family and text colors with theme support
  - Smooth color transitions for theme switching
  - Minimum height to fill viewport
  - Bottom padding for content clearance above fixed/mobile elements
-->
<body class="bg-background-light dark:bg-background-dark font-display text-[#0e121b] dark:text-[#f8f9fc] transition-colors duration-300 min-h-screen pb-40">



<!-- ===== HOME SCREEN ===== -->
<!-- 
  Primary application screen displayed on initial load.
  This screen serves as the authentication gateway and main dashboard for authenticated users.
  Uses the "screen" and "active" classes for screen management - only one screen can be active at a time.
-->
<div id="home-screen" class="screen active">
    <!-- 
      Top App Bar - CANONICAL REFERENCE: Admin Dashboard
      Fixed header that remains visible during scrolling.
      Uses backdrop blur and semi-transparent background for glassmorphism effect.
    -->
    <header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 nav-blur border-b border-gray-200 dark:border-gray-800">
        <div class="flex items-center justify-between px-4 h-16 max-w-md mx-auto">
            <!-- 
              Hamburger menu button for navigation drawer (mobile-first pattern).
              Opens side navigation when clicked. Has visual feedback states (hover, active).
            -->
            <button id="home-hamburger-menu" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                <!-- Material icon for menu -->
                <span class="material-symbols-outlined text-[#0e121b] dark:text-white">menu</span>
            </button>
            <!-- Application title - centered in header -->
            <h1 class="text-lg font-bold tracking-tight text-[#0e121b] dark:text-white">Local Job Board</h1>
            <!-- Spacer div to maintain balanced layout (mirrors hamburger button width) -->
            <div class="w-10"></div>
        </div>
    </header>

    <!-- 
      Authentication Gate - ZERO-STATE COMPLIANCE
      Displayed when user is not authenticated. Serves as entry point to the application.
      Implements zero-state pattern with clear call-to-action for authentication.
    -->
    <div id="home-auth-gate" class="max-w-md mx-auto px-4 pt-8">
        <!-- 
          Authentication card with consistent styling across light/dark themes.
          Contains both sign-in and sign-up forms in tabbed interface.
        -->
        <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-6 shadow-sm">
            <!-- Header section with icon and descriptive text -->
            <div class="flex items-center gap-3 mb-6">
                <!-- Circular avatar container with primary color accent -->
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-primary">person</span>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-[#0e121b] dark:text-white">Find Local Opportunities</h2>
                    <p class="text-sm text-[#4e6797] dark:text-gray-400 mt-1">Sign in or create an account to get started</p>
                </div>
            </div>
            
            <!-- 
              Tab navigation for switching between sign-in and sign-up forms.
              Uses border-bottom to indicate active tab (sign-in is default).
            -->
            <div id="auth-tabs" class="flex border-b border-gray-200 dark:border-gray-800 mb-6">
                <!-- 
                  Sign In tab - active by default (indicated by primary color and bottom border).
                  Clicking this tab shows the sign-in form and hides the sign-up form.
                -->
                <button id="tab-signin" class="flex-1 py-3 text-center font-medium text-primary border-b-2 border-primary">Sign In</button>
                <!-- 
                  Sign Up tab - inactive by default.
                  Clicking this tab shows the sign-up form and hides the sign-in form.
                -->
                <button id="tab-signup" class="flex-1 py-3 text-center font-medium text-[#4e6797] dark:text-gray-400">Sign Up</button>
            </div>
            
            <!-- 
              Sign In Form
              Visible by default when authentication gate is displayed.
              Contains email and password fields with validation.
            -->
            <div id="signin-form" class="space-y-4">
                <!-- Email input field with icon and accessibility label -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Email Address</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <!-- Icon container for visual cue -->
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">mail</span>
                        </div>
                        <!-- 
                          Email input field.
                          Type="email" enables browser validation and mobile keyboard optimization.
                          Placeholder provides example format expectation.
                        -->
                        <input id="signin-email" type="email" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="you@example.com"/>
                    </div>
                </div>
                
                <!-- Password input field with icon and accessibility label -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Password</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <!-- Icon container for visual cue -->
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">lock</span>
                        </div>
                        <!-- 
                          Password input field.
                          Type="password" masks input for security.
                          Placeholder uses dots to indicate password field.
                        -->
                        <input id="signin-password" type="password" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="••••••••"/>
                    </div>
                </div>
                
                <!-- Submit button and error message container -->
                <div class="pt-2">
                    <!-- 
                      Sign In submission button.
                      Has hover and active state transformations for visual feedback.
                      Clicking triggers authentication logic (handled by JavaScript).
                    -->
                    <button id="signin-submit" class="w-full h-14 bg-primary text-white text-base font-bold leading-normal rounded-full shadow-lg shadow-primary/25 hover:bg-primary/90 active:scale-95 transition-all">
                        Sign In
                    </button>
                    <!-- 
                      Error message container for sign-in failures.
                      Initially hidden, displayed when authentication fails.
                      Contains validation or authentication error messages.
                    -->
                    <p id="signin-error" class="text-xs text-red-500 text-center mt-3 hidden">Invalid email or password</p>
                </div>
            </div>
            
            <!-- 
              Sign Up Form
              Hidden by default, shown when user clicks "Sign Up" tab.
              Contains name, email, and password fields for account creation.
            -->
            <div id="signup-form" class="space-y-4 hidden">
                <!-- Full name input field for account registration -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Full Name</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <!-- Icon container for visual cue -->
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">person</span>
                        </div>
                        <!-- 
                          Name input field for account registration.
                          Collects user's full name for personalization and display.
                        -->
                        <input id="signup-name" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="John Doe"/>
                    </div>
                </div>
                
                <!-- Email input field for account registration -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Email Address</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <!-- Icon container for visual cue -->
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">mail</span>
                        </div>
                        <!-- 
                          Email input for account registration.
                          Must be unique across the system.
                        -->
                        <input id="signup-email" type="email" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="you@example.com"/>
                    </div>
                </div>
                
                <!-- Password input field for account registration -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Password</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <!-- Icon container for visual cue -->
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">lock</span>
                        </div>
                        <!-- 
                          Password input for account registration.
                          Minimum complexity requirements should be enforced by JavaScript.
                        -->
                        <input id="signup-password" type="password" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="••••••••"/>
                    </div>
                </div>
                
                <!-- Submit button and error message container for sign-up -->
                <div class="pt-2">
                    <!-- 
                      Create Account submission button.
                      Triggers account creation logic and user registration.
                    -->
                    <button id="signup-submit" class="w-full h-14 bg-primary text-white text-base font-bold leading-normal rounded-full shadow-lg shadow-primary/25 hover:bg-primary/90 active:scale-95 transition-all">
                        Create Account
                    </button>
                    <!-- 
                      Error message container for sign-up validation failures.
                      Displays when required fields are missing or validation fails.
                    -->
                    <p id="signup-error" class="text-xs text-red-500 text-center mt-3 hidden">Please fill in all fields</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 
      Authenticated Content - Hidden until auth
      This section becomes visible after successful authentication.
      Contains personalized dashboard content for the logged-in user.
    -->
    <div id="home-authenticated" class="max-w-md mx-auto hidden">
        <!-- Welcome Section - Personalized greeting for authenticated user -->
        <div class="px-4 pt-6 pb-2">
            <!-- 
              Welcome message dynamically populated with user's name.
              JavaScript will update the text content after authentication.
            -->
            <h2 id="home-welcome" class="text-2xl font-bold leading-tight mb-4 text-[#0e121b] dark:text-white">
                Welcome back
            </h2>
            <!-- Descriptive subtitle explaining dashboard purpose -->
            <p class="text-base font-normal leading-normal text-[#4e6797] dark:text-gray-400 mt-2">
                Explore opportunities and manage your job search.
            </p>
        </div>

        <!-- 
          Saved Jobs Section - DYNAMIC READ-ONLY
          Displays jobs the user has saved for later review.
          Populated dynamically from localStorage data.
        -->
        <div class="px-4 pt-4">
            <h3 class="text-lg font-bold text-[#0e121b] dark:text-white">
                Your Saved Jobs
            </h3>
        </div>

        <!-- 
          Saved jobs container - dynamically populated from localStorage.
          Initial state shows empty state message when no jobs are saved.
          JavaScript will replace content with saved job cards when available.
        -->
        <div id="saved-jobs-container" class="flex flex-col gap-4 p-4">
            <!-- Empty state - displayed when localStorage has no saved jobs -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                <p class="text-gray-500 dark:text-gray-400">No saved jobs yet</p>
            </div>
        </div>

        <!-- 
          Applied Jobs Section - NEW
          Tracks jobs the user has applied to.
          Separate from saved jobs to distinguish between interest and action.
        -->
        <div class="px-4 pt-6">
            <h3 class="text-lg font-bold text-[#0e121b] dark:text-white">
                Your Applications
            </h3>
        </div>

        <!-- 
          Applied jobs container - dynamically populated from localStorage.
          Initial state shows empty state message when no applications exist.
          JavaScript will replace content with applied job cards when available.
        -->
        <div id="applied-jobs-container" class="flex flex-col gap-4 p-4">
            <!-- Empty state - displayed when localStorage has no application records -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                <p class="text-gray-500 dark:text-gray-400">No applications yet</p>
            </div>
        </div>

        <!-- 
          Article Cards - STATIC ILLUSTRATIVE CONTENT
          Non-interactive content cards for career resources.
          Opacity reduced to indicate these are sample/placeholder content.
        -->
        <div class="px-4 pt-6">
            <h3 class="text-lg font-bold text-[#0e121b] dark:text-white mb-4">
                Career Resources
            </h3>
        </div>

        <!-- 
          Static content cards with reduced opacity (60%) to indicate they're 
          illustrative rather than functional in this prototype.
        -->
        <div class="flex flex-col gap-4 p-4">
            <!-- Card 1: CV Writing Tips -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow opacity-60">
                <div class="flex justify-between items-start mb-3">
                    <div class="flex-1">
                        <h4 class="text-base font-bold text-[#0e121b] dark:text-white">How to Write a Great CV</h4>
                        <p class="text-sm text-[#4e6797] dark:text-gray-400 mt-1">Tips for creating an effective resume</p>
                    </div>
                </div>
            </div>

            <!-- Card 2: Interview Preparation -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow opacity-60">
                <div class="flex justify-between items-start mb-3">
                    <div class="flex-1">
                        <h4 class="text-base font-bold text-[#0e121b] dark:text-white">Interview Preparation Guide</h4>
                        <p class="text-sm text-[#4e6797] dark:text-gray-400 mt-1">Common questions and how to answer them</p>
                    </div>
                </div>
            </div>

            <!-- Card 3: Salary Negotiation -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow opacity-60">
                <div class="flex justify-between items-start mb-3">
                    <div class="flex-1">
                        <h4 class="text-base font-bold text-[#0e121b] dark:text-white">Salary Negotiation Tips</h4>
                        <p class="text-sm text-[#4e6797] dark:text-gray-400 mt-1">How to discuss compensation effectively</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

  <!-- ===== JOBS SCREEN ===== -->
<!-- Main container for the Jobs module. Contains three distinct views: job listing, job details, and job posting. -->
<div id="jobs-screen" class="screen">
    <!-- Top App Bar - CANONICAL REFERENCE: Admin Dashboard -->
    <!-- Sticky header for navigation within the Jobs screen. References a shared design pattern with the Admin Dashboard. -->
    <header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 nav-blur border-b border-gray-200 dark:border-gray-800">
        <div class="flex items-center justify-between px-4 h-16 max-w-md mx-auto">
            <!-- Button to open the global slide-over navigation menu. -->
            <button id="jobs-hamburger-menu" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                <span class="material-symbols-outlined text-[#0e121b] dark:text-white">menu</span>
            </button>
            <!-- Dynamic page title for the Jobs screen. -->
            <h1 id="jobs-page-title" class="text-lg font-bold tracking-tight text-[#0e121b] dark:text-white">Jobs</h1>
            <!-- Placeholder spacer to balance the flex layout (mirrors hamburger button width). -->
            <div class="w-10"></div>
        </div>
    </header>

    <!-- VIEW 1: JOB LISTING - ZERO-STATE COMPLIANCE -->
    <!-- Primary view showing a list of available jobs. Has 'active' class by default; other views are hidden. -->
    <main id="jobs-listing-view" class="jobs-view active max-w-md mx-auto">
        <!-- Headline Section -->
        <!-- Introductory content explaining the purpose of this screen to the user. -->
        <section class="px-4 pt-6 pb-2">
            <h1 class="text-[32px] font-bold leading-tight tracking-[-0.015em] text-[#0e121b] dark:text-[#f8f9fc]">
                Browse available jobs near you
            </h1>
            <p class="text-base font-normal leading-normal text-[#4e6797] dark:text-gray-400 mt-2">
                Find your next opportunity in your local community.
            </p>
        </section>

        <!-- Search Bar - INPUT BORDER BUG FIXED -->
        <!-- Search input for filtering jobs by title or company. Note: Bug fix comment indicates previous styling issue. -->
        <div class="px-4 py-3">
            <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                <div class="flex items-center justify-center px-4">
                    <span class="material-symbols-outlined text-gray-500">search</span>
                </div>
                <!-- Input field for job search. Expected to trigger a filtering function on input or change event. -->
                <input id="job-search" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="Search for job title or company..."/>
            </div>
        </div>

        <!-- Filter Chips -->
        <!-- Interactive buttons for filtering the job list by status (All, Saved, Applied) or attributes (Category, Salary). -->
        <div class="flex gap-3 px-4 py-2 overflow-x-auto no-scrollbar">
            <!-- 'All Jobs' filter chip. 'data-filter' attribute is used by JavaScript to identify the filter type. -->
            <button class="filter-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-filter="all">
                <p class="text-sm font-medium text-[#0e121b] dark:text-white">All Jobs</p>
            </button>
            <!-- Filter chip to show only jobs the user has saved/bookmarked. -->
            <button class="filter-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-filter="saved">
                <p class="text-sm font-medium text-[#0e121b] dark:text-white">Saved</p>
            </button>
            <!-- Filter chip to show only jobs the user has applied to. -->
            <button class="filter-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-filter="applied">
                <p class="text-sm font-medium text-[#0e121b] dark:text-white">Applied</p>
            </button>
            <!-- Filter chip for job category. Icon indicates a dropdown or secondary menu should appear on click. -->
            <button class="filter-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-filter="category">
                <p class="text-sm font-medium text-[#0e121b] dark:text-white">Category</p>
                <span class="material-symbols-outlined text-[20px]">keyboard_arrow_down</span>
            </button>
            <!-- Filter chip for salary range. Icon indicates a dropdown or secondary menu should appear on click. -->
            <button class="filter-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-filter="salary">
                <p class="text-sm font-medium text-[#0e121b] dark:text-white">Salary Range</p>
                <span class="material-symbols-outlined text-[20px]">keyboard_arrow_down</span>
            </button>
        </div>

        <!-- Job Cards List - DYNAMICALLY POPULATED FROM localStorage -->
        <!-- Container where individual job cards will be rendered. Initial content is a zero-state placeholder. -->
        <div id="jobs-list-container" class="flex flex-col gap-4 p-4">
            <!-- Zero-state placeholder. This element will be removed or hidden when job data is loaded from localStorage. -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                <p class="text-gray-500 dark:text-gray-400">No jobs available yet. Be the first to post one!</p>
            </div>
        </div>

        <!-- Post Job Button -->
        <!-- Primary Call-to-Action (CTA) button to navigate to the job posting form (VIEW 3). -->
        <div class="px-4 py-6">
            <button id="open-post-job" class="w-full flex items-center justify-center gap-2 h-14 bg-primary text-white text-base font-bold leading-normal rounded-full shadow-lg shadow-primary/25 hover:bg-primary/90 active:scale-95 transition-all">
                <span class="material-symbols-outlined text-lg">add</span>
                Post a Job
            </button>
        </div>
    </main>

    <!-- VIEW 2: JOB DETAILS -->
    <!-- Detail view for a single job. Activated when a user clicks a job card in VIEW 1. -->
    <main id="job-details-view" class="jobs-view max-w-md mx-auto">
        <!-- Back Button -->
        <!-- Navigation element to return the user to the job listing view (VIEW 1). -->
        <div class="px-4 pt-4">
            <button id="back-from-details" class="flex items-center gap-2 text-primary font-medium mb-2">
                <span class="material-symbols-outlined">arrow_back</span>
                Back to Jobs
            </button>
        </div>

        <!-- Job Headline & Meta -->
        <!-- Section for displaying the core details of the selected job. Content is populated dynamically via JavaScript. -->
        <div class="px-4 pt-2 pb-4">
            <!-- Dynamic job title. -->
            <h2 id="detail-title" class="text-3xl font-bold leading-tight mb-2 text-[#0e121b] dark:text-white">Job Title</h2>
            <div class="flex flex-wrap items-center gap-2">
                <!-- Dynamic job location. -->
                <span id="detail-location" class="text-sm font-medium text-[#4e6797] dark:text-gray-400">Location •</span>
                <!-- Dynamic job salary range. Formatted in Nigerian Naira (₦). -->
                <span id="detail-salary" class="text-sm font-bold text-primary">₦0 - ₦0 /yr</span>
            </div>
        </div>

        <!-- Hero Image -->
        <!-- Placeholder for a job-related image. Currently empty; could be populated from job data. -->
        <div class="px-4 mb-6">
            <div class="w-full aspect-[16/9] bg-gray-200 dark:bg-gray-800 rounded-xl shadow-sm"></div>
        </div>

        <!-- Content Cards -->
        <div class="px-4 space-y-4">
            <!-- Description Card -->
            <!-- Card containing the full job description. -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-5 shadow-sm">
                <h3 class="text-lg font-bold mb-3 flex items-center gap-2 text-[#0e121b] dark:text-white">
                    <span class="material-symbols-outlined text-primary text-xl">info</span>
                    Job Description
                </h3>
                <!-- Dynamic job description text. -->
                <p id="detail-description" class="text-gray-600 dark:text-gray-300 leading-relaxed text-base">
                    Job description will appear here.
                </p>
            </div>

            <!-- Requirements Card -->
            <!-- Card listing the job requirements. Structured as a list. -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-5 shadow-sm">
                <h3 class="text-lg font-bold mb-3 flex items-center gap-2 text-[#0e121b] dark:text-white">
                    <span class="material-symbols-outlined text-primary text-xl">checklist</span>
                    Requirements
                </h3>
                <!-- Container for requirement list items. Populated dynamically. -->
                <ul id="detail-requirements" class="space-y-3">
                    <!-- Template list item structure. Will be cloned and populated for each requirement. -->
                    <li class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-green-500 text-sm mt-1">check_circle</span>
                        <span class="text-gray-600 dark:text-gray-300 text-base">Requirements will appear here.</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Application Actions -->
        <!-- Fixed footer bar containing action buttons for the displayed job. -->
        <div class="fixed bottom-20 left-0 right-0 z-40 bg-background-light/95 dark:bg-background-dark/95 nav-blur px-4 py-4 border-t border-gray-200 dark:border-gray-800">
            <!-- Primary action: Apply for the job. Likely triggers a modal or application flow. -->
            <button id="apply-job" class="w-full bg-primary text-white py-4 rounded-full font-bold text-base shadow-lg shadow-primary/25 active:scale-95 transition-transform">
                Apply for Job
            </button>
            <!-- Secondary action: Save/bookmark the job for later. Toggle state expected. -->
            <button id="save-job-detail" class="w-full bg-transparent border-2 border-primary/20 text-primary py-4 rounded-full font-bold text-base hover:bg-primary/5 active:scale-95 transition-all mt-3">
                Save Job
            </button>
        </div>
    </main>

    <!-- VIEW 3: POST JOB - WITH COMPANY ID AND EMAIL FIELDS -->
    <!-- Form view for creating a new job listing. Includes new fields for company authentication. -->
    <main id="post-job-view" class="jobs-view max-w-md mx-auto">
        <!-- Back Button -->
        <!-- Navigation to return to the job listing view (VIEW 1). -->
        <div class="px-4 pt-4">
            <button id="back-from-post" class="flex items-center gap-2 text-primary font-medium mb-2">
                <span class="material-symbols-outlined">arrow_back</span>
                Back to Jobs
            </button>
        </div>

        <!-- Form Section -->
        <!-- Main container for all form fields and submission buttons. -->
        <div class="px-4 pt-2 pb-24">
            <h2 class="text-2xl font-bold leading-tight mb-6 text-[#0e121b] dark:text-white">Create Job Listing</h2>
            
            <!-- Job Title Field -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Job Title *</label>
                <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                    <div class="flex items-center justify-center px-4">
                        <span class="material-symbols-outlined text-gray-500">work</span>
                    </div>
                    <!-- Input for the job title. Required field. -->
                    <input id="post-job-title" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="e.g., Senior Software Engineer"/>
                </div>
            </div>

            <!-- Company Name Field -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Company Name *</label>
                <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                    <div class="flex items-center justify-center px-4">
                        <span class="material-symbols-outlined text-gray-500">apartment</span>
                    </div>
                    <!-- Input for the hiring company's name. Required field. -->
                    <input id="post-company" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="Your company name"/>
                </div>
            </div>

            <!-- Location Field -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Location *</label>
                <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                    <div class="flex items-center justify-center px-4">
                        <span class="material-symbols-outlined text-gray-500">location_on</span>
                    </div>
                    <!-- Input for the job's location. Required field. -->
                    <input id="post-location" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="City, State"/>
                </div>
            </div>

            <!-- Company ID (NEW FIELD) -->
            <!-- New required field for company authentication/authorization. Links job posts to a specific company account. -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Company ID *</label>
                <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                    <div class="flex items-center justify-center px-4">
                        <span class="material-symbols-outlined text-gray-500">badge</span>
                    </div>
                    <!-- Input for a unique company identifier. Assumed to be provided by the Admin Dashboard system. -->
                    <input id="post-company-id" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="Your company's unique ID"/>
                </div>
                <!-- Helper text explaining where to find the Company ID. -->
                <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">Get this from your Admin Dashboard</p>
            </div>

            <!-- Company Email (NEW FIELD) -->
            <!-- New required field for company contact/verification. -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Company Email *</label>
                <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                    <div class="flex items-center justify-center px-4">
                        <span class="material-symbols-outlined text-gray-500">mail</span>
                    </div>
                    <!-- Input for the company's contact email. Must be a valid email format. -->
                    <input id="post-company-email" type="email" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="contact@company.com"/>
                </div>
            </div>

            <!-- Category Selection -->
            <!-- Horizontal chip selection for job category. Only one category is expected to be selectable. -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Category *</label>
                <div class="flex gap-3 overflow-x-auto no-scrollbar pb-2">
                    <!-- Each button has a 'data-category' attribute storing its value for form processing. -->
                    <button class="category-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-category="Technology">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">Technology</p>
                    </button>
                    <button class="category-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-category="Retail">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">Retail</p>
                    </button>
                    <button class="category-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-category="Hospitality">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">Hospitality</p>
                    </button>
                    <button class="category-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-category="Healthcare">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">Healthcare</p>
                    </button>
                    <button class="category-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-category="Education">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">Education</p>
                    </button>
                </div>
            </div>

            <!-- Salary Range Selection - NIGERIAN NAIRA (₦) COMPLIANCE -->
            <!-- Salary selection using predefined ranges or a custom input. Formatted for Nigerian Naira. -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Salary Range * (₦)</label>
                <div class="flex gap-3 overflow-x-auto no-scrollbar pb-2">
                    <!-- Predefined salary range buttons. 'data-salary' attribute holds the display value. -->
                    <button class="salary-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-salary="₦50k - ₦70k">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">₦50k - ₦70k</p>
                    </button>
                    <button class="salary-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-salary="₦70k - ₦90k">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">₦70k - ₦90k</p>
                    </button>
                    <button class="salary-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-salary="₦90k - ₦110k">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">₦90k - ₦110k</p>
                    </button>
                    <button class="salary-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-salary="₦110k+">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">₦110k+</p>
                    </button>
                    <!-- Special button to reveal the custom salary input field. -->
                    <button class="salary-chip flex h-10 shrink-0 items-center justify-center gap-2 rounded-xl bg-gray-100 dark:bg-gray-800 px-4 transition-colors hover:bg-gray-200 dark:hover:bg-gray-700" data-salary="custom">
                        <p class="text-sm font-medium text-[#0e121b] dark:text-white">Custom</p>
                    </button>
                </div>
                <!-- Custom Salary Input -->
                <!-- Hidden container for entering a non-standard salary range. Becomes visible when "Custom" chip is selected. -->
                <div id="custom-salary-input" class="mt-3 hidden">
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">currency_exchange</span>
                        </div>
                        <!-- Free-text input for custom salary range. Validation expected. -->
                        <input id="post-salary-custom" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="e.g., ₦150,000 - ₦250,000"/>
                    </div>
                </div>
            </div>

            <!-- Job Description Field -->
            <!-- Large textarea for the detailed job description. -->
            <div class="mb-8">
                <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Job Description *</label>
                <div class="w-full bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden">
                    <textarea id="post-description" class="w-full h-48 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none p-4 text-base font-normal resize-none" placeholder="Describe the responsibilities, requirements, and benefits of this position..."></textarea>
                </div>
            </div>

            <!-- Action Buttons -->
            <!-- Form submission and cancellation controls. -->
            <div class="flex flex-col gap-3">
                <!-- Primary submit button. Expected to validate form and save job data to localStorage and/or backend. -->
                <button id="submit-job-post" class="w-full h-14 bg-primary text-white text-base font-bold leading-normal rounded-full shadow-lg shadow-primary/25 hover:bg-primary/90 active:scale-95 transition-all">
                    Post Job
                </button>
                <div class="flex gap-3">
                    <!-- Secondary button to save form data as a draft without publishing. Expected to store in localStorage. -->
                    <button id="save-draft" class="flex-1 h-12 bg-transparent border-2 border-primary/20 text-primary text-base font-bold leading-normal rounded-full hover:bg-primary/5 active:scale-95 transition-all">
                        Save Draft
                    </button>
                    <!-- Cancel button to discard the form and return to the job listing view. -->
                    <button id="cancel-post" class="flex-1 h-12 bg-gray-100 dark:bg-gray-800 text-[#0e121b] dark:text-white text-base font-bold leading-normal rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 active:scale-95 transition-all">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- ===== ADMIN DASHBOARD ===== -->
<!-- Separate screen for administrative functions, accessible via bottom navigation. -->
<div id="admin-screen" class="screen">
    <!-- Top App Bar - CANONICAL REFERENCE -->
    <!-- Sticky header matching the design pattern established in the Jobs screen. -->
    <header class="sticky top-0 z-50 bg-background-light/80 dark:bg-background-dark/80 nav-blur border-b border-gray-200 dark:border-gray-800">
        <div class="flex items-center justify-between px-4 h-16 max-w-md mx-auto">
            <!-- Button to open the global slide-over navigation menu. -->
            <button id="admin-hamburger-menu" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                <span class="material-symbols-outlined text-[#0e121b] dark:text-white">menu</span>
            </button>
            <!-- Static title for the Admin Dashboard. -->
            <h1 class="text-lg font-bold tracking-tight text-[#0e121b] dark:text-white">Admin Dashboard</h1>
            <!-- Placeholder spacer for layout symmetry. -->
            <div class="w-10"></div>
        </div>
    </header>

    <!-- Admin Credential Gate - DUAL-KEY AUTHENTICATION -->
    <!-- Authentication form displayed before accessing the main admin content. -->
    <div id="admin-gate" class="max-w-md mx-auto px-4 pt-8">
        <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-6 shadow-sm mb-6">
            <!-- Header section introducing the authentication requirement. -->
            <div class="flex items-center gap-3 mb-6">
                <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                    <span class="material-symbols-outlined text-primary">admin_panel_settings</span>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-[#0e121b] dark:text-white">Company Admin Access</h2>
                    <p class="text-sm text-[#4e6797] dark:text-gray-400 mt-1">Enter your company-specific credentials</p>
                </div>
            </div>
            
            <!-- Tabbed interface to toggle between Sign In and Sign Up forms. -->
            <div id="admin-auth-tabs" class="flex border-b border-gray-200 dark:border-gray-800 mb-6">
                <!-- Active tab for existing admin users. -->
                <button id="admin-tab-signin" class="flex-1 py-3 text-center font-medium text-primary border-b-2 border-primary">Sign In</button>
                <!-- Inactive tab for new company registration. -->
                <button id="admin-tab-signup" class="flex-1 py-3 text-center font-medium text-[#4e6797] dark:text-gray-400">Sign Up</button>
            </div>
            
            <!-- Admin Sign In Form -->
            <!-- Default visible form for authenticating an existing admin user. -->
            <div id="admin-signin-form" class="space-y-4">
                <!-- Company Email Input -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Company Email</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">mail</span>
                        </div>
                        <!-- Input for the admin's registered email address. -->
                        <input id="admin-signin-email" type="email" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="admin@company.com"/>
                    </div>
                </div>
                
                <!-- Company ID Input -->
                <!-- Part of the dual-key authentication: requires both Company ID and password. -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Company ID</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">badge</span>
                        </div>
                        <!-- Input for the unique company identifier. -->
                        <input id="admin-signin-companyid" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="Your Company ID"/>
                    </div>
                </div>
                
                <!-- Password Input -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Password</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">lock</span>
                        </div>
                        <!-- Password input field. -->
                        <input id="admin-signin-password" type="password" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="••••••••"/>
                    </div>
                </div>
                
                <!-- Submit Button and Error Message -->
                <div class="pt-4">
                    <!-- Button to submit sign-in credentials. Expected to validate against stored admin data. -->
                    <button id="admin-signin-submit" class="w-full h-14 bg-primary text-white text-base font-bold leading-normal rounded-full shadow-lg shadow-primary/25 hover:bg-primary/90 active:scale-95 transition-all">
                        Access Admin Dashboard
                    </button>
                    <!-- Error message element, hidden by default, shown on authentication failure. -->
                    <p id="admin-signin-error" class="text-xs text-red-500 text-center mt-3 hidden">Invalid credentials</p>
                </div>
            </div>
            
            <!-- Admin Sign Up Form -->
            <!-- Form for registering a new company admin account. Hidden by default. -->
            <div id="admin-signup-form" class="space-y-4 hidden">
                <!-- Company Name Input -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Company Name *</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">apartment</span>
                        </div>
                        <!-- Input for the new company's name. -->
                        <input id="admin-signup-company" type="text" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="Your Company Name"/>
                    </div>
                </div>
                
                <!-- Admin Email Input -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Admin Email *</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">person</span>
                        </div>
                        <!-- Input for the primary admin's email address. -->
                        <input id="admin-signup-email" type="email" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="admin@company.com"/>
                    </div>
                </div>
                
                <!-- Password Input -->
                <div>
                    <label class="block text-sm font-medium text-[#0e121b] dark:text-white mb-2">Password *</label>
                    <div class="flex w-full h-14 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-center px-4">
                            <span class="material-symbols-outlined text-gray-500">lock</span>
                        </div>
                        <!-- Input for the admin account password. -->
                        <input id="admin-signup-password" type="password" class="flex-1 bg-transparent text-[#0e121b] dark:text-white placeholder:text-gray-400 focus:outline-none px-2 text-base font-normal" placeholder="••••••••"/>
                    </div>
                </div>
                
                <!-- Submit Button and Messages -->
                <div class="pt-4">
                    <!-- Button to create a new company admin account. Expected to generate a unique Company ID. -->
                    <button id="admin-signup-submit" class="w-full h-14 bg-primary text-white text-base font-bold leading-normal rounded-full shadow-lg shadow-primary/25 hover:bg-primary/90 active:scale-95 transition-all">
                        Create Company Account
                    </button>
                    <!-- Error message for sign-up validation failures. -->
                    <p id="admin-signup-error" class="text-xs text-red-500 text-center mt-3 hidden">Please fill in all fields</p>
                    <!-- Informational text explaining the Company ID generation process. -->
                    <p class="text-xs text-[#4e6797] dark:text-gray-400 text-center mt-3">
                        Your Company ID will be generated automatically and displayed after sign-up.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content - SCOPE-COMPLIANT -->
    <!-- The main admin dashboard content, hidden until successful authentication. -->
    <main id="admin-content" class="max-w-md mx-auto hidden">
        <!-- Stats Overview -->
        <!-- High-level summary statistics for the authenticated company. -->
        <div class="px-4 pt-6 pb-2">
            <h2 class="text-2xl font-bold leading-tight mb-4 text-[#0e121b] dark:text-white">Overview</h2>
            <div class="grid grid-cols-2 gap-3">
                <!-- Pending Jobs Stat Card -->
                <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-[#4e6797] dark:text-gray-400">Pending Jobs</p>
                            <!-- Dynamic count of jobs awaiting admin approval. -->
                            <p id="admin-pending-jobs" class="text-2xl font-bold text-[#0e121b] dark:text-white mt-1">0</p>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center">
                            <span class="material-symbols-outlined text-primary">pending_actions</span>
                        </div>
                    </div>
                </div>
                <!-- Total Users Stat Card -->
                <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-[#4e6797] dark:text-gray-400">Total Users</p>
                            <!-- Dynamic count of users associated with the company. -->
                            <p id="admin-total-users" class="text-2xl font-bold text-[#0e121b] dark:text-white mt-1">1</p>
                        </div>
                        <div class="w-10 h-10 rounded-full bg-green-500/10 flex items-center justify-center">
                            <span class="material-symbols-outlined text-green-500">group</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Job Approvals Section -->
        <!-- Section for reviewing and approving job postings created by users. -->
        <div class="px-4 pt-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-[#0e121b] dark:text-white">Job Approvals</h3>
                <!-- Dynamic badge showing the number of pending job approvals. -->
                <span id="admin-pending-count" class="text-xs font-medium text-primary bg-primary/10 px-3 py-1 rounded-full">0 pending</span>
            </div>
        </div>

        <!-- Container for Pending Job Cards -->
        <!-- Dynamically populated with job listings that require admin approval. -->
        <div id="admin-pending-jobs-container" class="flex flex-col gap-4 p-4">
            <!-- Zero-state placeholder shown when no pending jobs exist. -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                <p class="text-gray-500 dark:text-gray-400">No pending jobs for approval</p>
            </div>
        </div>

        <!-- Application Approvals Section - NEW -->
        <!-- Section for reviewing and approving user applications to jobs. -->
        <div class="px-4 pt-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-[#0e121b] dark:text-white">Application Approvals</h3>
                <!-- Dynamic badge showing the number of pending application approvals. -->
                <span id="admin-pending-apps-count" class="text-xs font-medium text-purple-500 bg-purple-500/10 px-3 py-1 rounded-full">0 pending</span>
            </div>
        </div>

        <!-- Container for Pending Application Cards -->
        <!-- Dynamically populated with job applications that require admin approval. -->
        <div id="admin-pending-apps-container" class="flex flex-col gap-4 p-4">
            <!-- Zero-state placeholder shown when no pending applications exist. -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                <p class="text-gray-500 dark:text-gray-400">No pending applications for approval</p>
            </div>
        </div>

        <!-- User Management Section -->
        <!-- Section for managing users within the company's scope. -->
        <div class="px-4 pt-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold text-[#0e121b] dark:text-white">User Management</h3>
                <!-- Button to open a modal or form for adding a new user to the company. -->
                <button id="admin-add-user-btn" class="flex items-center justify-center gap-2 h-10 bg-primary text-white text-sm font-bold px-4 rounded-full shadow-sm hover:bg-primary/90 active:scale-95 transition-all">
                    <span class="material-symbols-outlined text-lg">add</span>
                    Add User
                </button>
            </div>
        </div>

        <!-- Container for User Cards -->
        <!-- Dynamically populated with users belonging to the authenticated company. -->
        <div id="admin-users-container" class="flex flex-col gap-4 p-4">
            <!-- Zero-state placeholder shown when only the primary admin user exists. -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                <p class="text-gray-500 dark:text-gray-400">No additional users yet</p>
            </div>
        </div>

        <!-- Reports & Analytics Section -->
        <!-- Section for displaying company-level analytics. -->
        <div class="px-4 pt-6">
            <h3 class="text-lg font-bold mb-4 text-[#0e121b] dark:text-white">Reports & Analytics</h3>
        </div>

        <!-- Analytics Stat Cards -->
        <div class="grid grid-cols-2 gap-3 p-4">
            <!-- Total Jobs Stat Card -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-purple-500">trending_up</span>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-[#4e6797] dark:text-gray-400">Total Jobs</p>
                        <!-- Dynamic count of all jobs posted by the company. -->
                        <p id="admin-total-jobs" class="text-lg font-bold text-[#0e121b] dark:text-white">0</p>
                    </div>
                </div>
            </div>
            <!-- Growth Rate Stat Card -->
            <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-orange-500/10 flex items-center justify-center">
                        <span class="material-symbols-outlined text-orange-500">show_chart</span>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-[#4e6797] dark:text-gray-400">Growth Rate</p>
                        <!-- Dynamic growth rate percentage, likely calculated from job or user metrics. -->
                        <p id="admin-growth-rate" class="text-lg font-bold text-[#0e121b] dark:text-white">0%</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- ===== UNIFIED BOTTOM NAVIGATION ===== -->
<!-- Global navigation bar fixed at the bottom of the viewport. Allows switching between app sections. -->
<nav class="fixed bottom-0 left-0 right-0 bg-white/90 dark:bg-gray-900/90 nav-blur border-t border-gray-200 dark:border-gray-800 h-20 flex items-center justify-around px-4">
    <!-- Home Navigation Button -->
    <!-- Currently active/selected state (indicated by primary color and filled icon). -->
    <button id="nav-home" class="nav-button flex flex-col items-center justify-center gap-1 text-primary">
        <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1">home</span>
        <span class="text-[10px] font-bold">Home</span>
    </button>
    <!-- Jobs Navigation Button -->
    <!-- Inactive state. Clicking this should navigate to the Jobs screen (id="jobs-screen"). -->
    <button id="nav-jobs" class="nav-button flex flex-col items-center justify-center gap-1 text-gray-400">
        <span class="material-symbols-outlined">work</span>
        <span class="text-[10px] font-medium">Jobs</span>
    </button>
    <!-- Admin Navigation Button -->
    <!-- Inactive state. Clicking this should navigate to the Admin Dashboard screen (id="admin-screen"). -->
    <button id="nav-admin" class="nav-button flex flex-col items-center justify-center gap-1 text-gray-400">
        <span class="material-symbols-outlined">admin_panel_settings</span>
        <span class="text-[10px] font-medium">Admin</span>
    </button>
</nav>

<!-- ===== SLIDE-OVER MENU (Single instance for all screens) ===== -->
<!-- Global side navigation menu (drawer) accessible from hamburger menus on all screens. -->

<!-- Overlay -->
<!-- Semi-transparent backdrop that appears when the slide-over menu is open. Clicking it closes the menu. -->
<div id="slide-overlay" class="overlay fixed inset-0 z-50 bg-black/50"></div>

<!-- Slide Panel -->
<!-- The actual sliding menu panel that appears from the left side of the screen. -->
<div id="slide-panel" class="slide-over fixed top-0 left-0 z-50 w-64 h-full bg-white dark:bg-gray-900 shadow-xl">
    <!-- Menu Header -->
    <div class="p-4 border-b border-gray-200 dark:border-gray-800">
        <!-- Close Button -->
        <div class="flex items-center justify-between mb-4">
            <button id="slide-close-menu" class="flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined text-[#0e121b] dark:text-white">close</span>
            </button>
        </div>
        <!-- User Info Section -->
        <!-- Displays current user's name and email. Populated dynamically based on auth state. -->
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
                <!-- Dynamic icon reflecting user role or avatar. -->
                <span id="slide-user-icon" class="material-symbols-outlined text-primary">person</span>
            </div>
            <div>
                <!-- Dynamic user display name. Default text indicates signed-out state. -->
                <p id="slide-user-name" class="text-sm font-bold text-[#0e121b] dark:text-white">User Account</p>
                <!-- Dynamic user email. Default text indicates signed-out state. -->
                <p id="slide-user-email" class="text-xs text-gray-500 dark:text-gray-400">Sign in to view details</p>
            </div>
        </div>
    </div>
    
    <!-- Menu Items -->
    <div class="p-2">
        <!-- Profile Settings Link -->
        <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
            <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">person</span>
            <span class="text-base font-normal text-[#0e121b] dark:text-white">Profile Settings</span>
        </a>
        <!-- Advanced Analytics Link -->
        <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
            <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">analytics</span>
            <span class="text-base font-normal text-[#0e121b] dark:text-white">Advanced Analytics</span>
        </a>
        <!-- System Settings Link -->
        <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
            <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">settings</span>
            <span class="text-base font-normal text-[#0e121b] dark:text-white">System Settings</span>
        </a>
        <!-- Footer Menu Items -->
        <div class="px-4 py-3 mt-2 border-t border-gray-200 dark:border-gray-800">
            <!-- Help & Support Link -->
            <a href="#" class="flex items-center gap-3 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">help</span>
                <span class="text-base font-normal text-[#0e121b] dark:text-white">Help & Support</span>
            </a>
            <!-- Log Out Button -->
            <!-- Triggers user logout and likely clears session data. -->
            <button id="slide-logout-btn" class="w-full flex items-center gap-3 py-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                <span class="material-symbols-outlined text-gray-600 dark:text-gray-400">logout</span>
                <span class="text-base font-normal text-red-500">Log Out</span>
            </button>
        </div>
    </div>
</div>

  <!-- ============================================================================
TOAST NOTIFICATION COMPONENT
============================================================================
A temporary notification element that displays success, error, or info messages
to users. It's positioned at the top center of the screen and uses CSS transitions
for smooth appearance and disappearance.
============================================================================ -->
<!-- 
TOAST CONTAINER:
- Positioned fixed at top center with high z-index to appear above all content
- Uses opacity and transform for fade-in/out and slide-down/up animations
- Initially hidden (opacity: 0) and positioned above viewport (translate-y-10)
-->
<div id="toast" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg transition-all duration-300 opacity-0 -translate-y-10">
    <div class="flex items-center gap-2">
        <!-- TOAST ICON:
             Dynamically updated based on notification type (success, error, info)
             Uses Material Symbols icon font with color variations per type -->
        <span id="toast-icon" class="material-symbols-outlined">check_circle</span>
        <!-- TOAST MESSAGE:
             Text content set programmatically based on notification context -->
        <span id="toast-message">Notification</span>
    </div>
</div>

<script>
    // ============================================================================
    // DATA STORE MODULE - LOCAL STORAGE MANAGER
    // ============================================================================
    /**
     * @namespace DataStore
     * @description Centralized data management layer for persistent storage using
     *              browser's LocalStorage API. Implements a schema for users,
     *              companies, jobs, applications, and analytics. All data is
     *              serialized as JSON strings with consistent key patterns.
     * @note This implementation uses LocalStorage which persists across browser
     *       sessions. Data format should remain stable as it affects existing
     *       user data.
     */
    const DataStore = {
        // ============================================================================
        // USER DATA MANAGEMENT (JOB SEEKERS)
        // ============================================================================
        
        /**
         * @function saveUser
         * @description Persists job seeker user data to LocalStorage and updates
         *              the current session user reference.
         * @param {string} email - User's email address, used as unique identifier
         *                 in storage key format: `user_${email}`
         * @param {Object} userData - Complete user profile object containing:
         *                 - email: User's email (should match param)
         *                 - password: Hashed or plain text password (security risk)
         *                 - name: User's display name
         *                 - [other profile fields]
         * @sideeffect Writes to LocalStorage under key `user_${email}`
         * @sideeffect Updates currentUser session reference via updateCurrentUser()
         */
        saveUser: function(email, userData) {
            // Store user data as JSON string with email-based key
            localStorage.setItem(`user_${email}`, JSON.stringify(userData));
            // Update session tracking to mark this user as currently logged in
            this.updateCurrentUser(email);
        },
        
        /**
         * @function getUser
         * @description Retrieves job seeker user data from LocalStorage by email.
         * @param {string} email - User's email address used to construct storage key
         * @returns {Object|null} Parsed user object if found, null if user doesn't exist
         * @sideeffect Reads from LocalStorage, performs JSON parsing
         */
        getUser: function(email) {
            const data = localStorage.getItem(`user_${email}`);
            return data ? JSON.parse(data) : null;
        },
        
        // ============================================================================
        // COMPANY DATA MANAGEMENT
        // ============================================================================
        
        /**
         * @function saveCompany
         * @description Persists company data to LocalStorage and updates current
         *              company session reference.
         * @param {string} companyId - Unique company identifier (generated elsewhere)
         * @param {Object} companyData - Company profile object containing:
         *                 - companyId: Should match param
         *                 - name: Company display name
         *                 - adminEmail: Primary administrator email
         *                 - password: Admin password (security concern)
         *                 - [other company details]
         * @sideeffect Writes to LocalStorage under key `company_${companyId}`
         * @sideeffect Updates currentCompany session reference via updateCurrentCompany()
         */
        saveCompany: function(companyId, companyData) {
            localStorage.setItem(`company_${companyId}`, JSON.stringify(companyData));
            this.updateCurrentCompany(companyId);
        },
        
        /**
         * @function getCompany
         * @description Retrieves company data from LocalStorage by company ID.
         * @param {string} companyId - Unique company identifier
         * @returns {Object|null} Parsed company object if found, null otherwise
         */
        getCompany: function(companyId) {
            const data = localStorage.getItem(`company_${companyId}`);
            return data ? JSON.parse(data) : null;
        },
        
        /**
         * @function addCompanyUser
         * @description Associates a user email with a company for multi-user
         *              company accounts. Maintains list of users per company.
         * @param {string} companyId - Company to which user should be added
         * @param {string} userEmail - Email of user to associate with company
         * @sideeffect Creates or updates array in LocalStorage under key `users_${companyId}`
         * @note Prevents duplicate entries for same user email
         */
        addCompanyUser: function(companyId, userEmail) {
            const key = `users_${companyId}`;
            const users = JSON.parse(localStorage.getItem(key)) || [];
            if (!users.includes(userEmail)) {
                users.push(userEmail);
                localStorage.setItem(key, JSON.stringify(users));
            }
        },
        
        /**
         * @function getCompanyUsers
         * @description Retrieves list of user emails associated with a company.
         * @param {string} companyId - Company identifier
         * @returns {Array<string>} Array of user email strings, empty array if none
         */
        getCompanyUsers: function(companyId) {
            const key = `users_${companyId}`;
            return JSON.parse(localStorage.getItem(key)) || [];
        },
        
        // ============================================================================
        // JOB POSTING MANAGEMENT
        // ============================================================================
        
        /**
         * @function saveJob
         * @description Stores a job posting with comprehensive indexing for
         *              efficient retrieval by company, status, and global listing.
         *              Implements business logic for job approval workflow.
         * @param {string} jobId - Unique job identifier (generated externally)
         * @param {Object} jobData - Complete job posting object containing:
         *                 - jobId: Should match param
         *                 - companyId: ID of posting company
         *                 - title: Job title
         *                 - companyName: Display name of company
         *                 - location: Job location
         *                 - category: Job category/industry
         *                 - salary: Salary range or information
         *                 - description: Job details and requirements
         *                 - companyEmail: Contact email for applications
         *                 - postedAt: ISO timestamp of posting
         *                 - status: 'pending', 'approved', or 'rejected'
         * @sideeffect Multiple LocalStorage writes:
         *             1. Primary job data under `job_${jobId}`
         *             2. Company job index under `company_jobs_${companyId}`
         *             3. Pending jobs index under `pending_jobs_${companyId}`
         * @sideeffect Updates analytics for job posting count
         * @dependency Assumes jobData.companyId exists and is valid
         */
        saveJob: function(jobId, jobData) {
            // Store primary job object
            localStorage.setItem(`job_${jobId}`, JSON.stringify(jobData));
            
            // Index job ID under company's job list for quick retrieval
            const companyKey = `company_jobs_${jobData.companyId}`;
            const companyJobs = JSON.parse(localStorage.getItem(companyKey)) || [];
            if (!companyJobs.includes(jobId)) {
                companyJobs.push(jobId);
                localStorage.setItem(companyKey, JSON.stringify(companyJobs));
            }
            
            // Add to pending jobs queue (requires admin approval)
            const pendingKey = `pending_jobs_${jobData.companyId}`;
            const pendingJobs = JSON.parse(localStorage.getItem(pendingKey)) || [];
            if (!pendingJobs.includes(jobId)) {
                pendingJobs.push(jobId);
                localStorage.setItem(pendingKey, JSON.stringify(pendingJobs));
            }
            
            // Record job posting event in analytics
            this.updateAnalyticsLog(jobData.companyId, 'jobPosted');
        },
        
        /**
         * @function getJob
         * @description Retrieves a single job posting by ID.
         * @param {string} jobId - Unique job identifier
         * @returns {Object|null} Parsed job object if found, null otherwise
         */
        getJob: function(jobId) {
            const data = localStorage.getItem(`job_${jobId}`);
            return data ? JSON.parse(data) : null;
        },
        
        /**
         * @function getAllJobs
         * @description Retrieves all job postings from LocalStorage, excluding
         *              rejected jobs. Performs linear scan of all LocalStorage keys.
         * @returns {Array<Object>} Array of all non-rejected job objects
         * @performance O(n) where n is LocalStorage key count - consider scaling implications
         * @note Filters out jobs with status 'rejected' to hide unapproved content
         */
        getAllJobs: function() {
            const jobs = [];
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key.startsWith('job_')) {
                    const jobData = JSON.parse(localStorage.getItem(key));
                    // Business rule: Only include non-rejected jobs in public listings
                    if (jobData && jobData.status !== 'rejected') {
                        jobs.push(jobData);
                    }
                }
            }
            return jobs;
        },
        
        /**
         * @function getCompanyJobs
         * @description Retrieves all jobs posted by a specific company using
         *              the company's job index for efficient lookup.
         * @param {string} companyId - Company identifier
         * @returns {Array<Object>} Array of job objects for the specified company
         * @note Returns empty array if company has no jobs or doesn't exist
         */
        getCompanyJobs: function(companyId) {
            const companyKey = `company_jobs_${companyId}`;
            const jobIds = JSON.parse(localStorage.getItem(companyKey)) || [];
            // Map job IDs to full job objects, filtering out any nulls (deleted jobs)
            return jobIds.map(jobId => this.getJob(jobId)).filter(job => job);
        },
        
        /**
         * @function updateJobStatus
         * @description Updates a job's approval status and manages pending jobs
         *              queue. Used by admin to approve or reject job postings.
         * @param {string} jobId - Job identifier to update
         * @param {string} status - New status: 'pending', 'approved', or 'rejected'
         * @returns {void}
         * @sideeffect Updates job object in LocalStorage
         * @sideeffect Removes job from pending queue if status changes from 'pending'
         * @businessLogic When a job is approved or rejected, it's removed from
         *                pending review queue. Rejected jobs remain in storage
         *                but are filtered out of getAllJobs() results.
         */
        updateJobStatus: function(jobId, status) {
            const job = this.getJob(jobId);
            if (job) {
                job.status = status;
                localStorage.setItem(`job_${jobId}`, JSON.stringify(job));
                
                // Business rule: Remove from pending queue once decision is made
                if (status !== 'pending') {
                    const pendingKey = `pending_jobs_${job.companyId}`;
                    let pendingJobs = JSON.parse(localStorage.getItem(pendingKey)) || [];
                    pendingJobs = pendingJobs.filter(id => id !== jobId);
                    localStorage.setItem(pendingKey, JSON.stringify(pendingJobs));
                }
            }
        },
        
        // ============================================================================
        // SAVED JOBS (USER BOOKMARKS)
        // ============================================================================
        
        /**
         * @function saveJobForUser
         * @description Bookmarks a job for a specific user. Prevents duplicate saves.
         * @param {string} userEmail - User's email address
         * @param {string} jobId - Job identifier to bookmark
         * @returns {boolean} true if job was saved (new), false if already saved
         * @sideeffect Creates/updates array in LocalStorage under `saved_jobs_${userEmail}`
         */
        saveJobForUser: function(userEmail, jobId) {
            const key = `saved_jobs_${userEmail}`;
            const savedJobs = JSON.parse(localStorage.getItem(key)) || [];
            if (!savedJobs.includes(jobId)) {
                savedJobs.push(jobId);
                localStorage.setItem(key, JSON.stringify(savedJobs));
                return true;
            }
            return false;
        },
        
        /**
         * @function removeSavedJob
         * @description Removes a job bookmark for a specific user.
         * @param {string} userEmail - User's email address
         * @param {string} jobId - Job identifier to remove from bookmarks
         * @returns {boolean} true if job was removed, false if not found
         * @sideeffect Updates array in LocalStorage under `saved_jobs_${userEmail}`
         */
        removeSavedJob: function(userEmail, jobId) {
            const key = `saved_jobs_${userEmail}`;
            const savedJobs = JSON.parse(localStorage.getItem(key)) || [];
            const index = savedJobs.indexOf(jobId);
            if (index > -1) {
                savedJobs.splice(index, 1);
                localStorage.setItem(key, JSON.stringify(savedJobs));
                return true;
            }
            return false;
        },
        
        /**
         * @function getUserSavedJobs
         * @description Retrieves all bookmarked jobs for a specific user.
         * @param {string} userEmail - User's email address
         * @returns {Array<Object>} Array of job objects that user has saved
         * @note Returns empty array if user has no saved jobs or doesn't exist
         */
        getUserSavedJobs: function(userEmail) {
            const key = `saved_jobs_${userEmail}`;
            const jobIds = JSON.parse(localStorage.getItem(key)) || [];
            return jobIds.map(jobId => this.getJob(jobId)).filter(job => job);
        },
        
        // ============================================================================
        // JOB APPLICATIONS MANAGEMENT
        // ============================================================================
        
        /**
         * @function getUserApplications
         * @description Retrieves all job applications submitted by a specific user.
         * @param {string} userEmail - Applicant's email address
         * @returns {Array<Object>} Array of application objects where user is applicant
         * @note Filters from global applications array by applicantEmail field
         */
        getUserApplications: function(userEmail) {
            const appsKey = 'applications';
            const applications = JSON.parse(localStorage.getItem(appsKey)) || [];
            return applications.filter(app => app.applicantEmail === userEmail);
        },
        
        /**
         * @function createApplication
         * @description Creates a new job application with automatic ID generation,
         *              timestamp, and default status. Updates application analytics.
         * @param {Object} applicationData - Partial application object containing:
         *                 - jobId: ID of job being applied to
         *                 - companyId: ID of hiring company
         *                 - applicantEmail: Email of applicant
         *                 - [other application fields like resume, cover letter]
         * @returns {string} Generated application ID (format: app_timestamp_random)
         * @sideeffect Adds to global applications array in LocalStorage
         * @sideeffect Updates analytics for application count
         * @businessLogic Sets default status to 'pending' and adds ISO timestamp
         */
        createApplication: function(applicationData) {
            const appsKey = 'applications';
            const applications = JSON.parse(localStorage.getItem(appsKey)) || [];
            // Generate unique application ID with timestamp and random suffix
            const applicationId = 'app_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            applicationData.applicationId = applicationId;
            applicationData.appliedAt = new Date().toISOString();
            applicationData.status = 'pending';
            applications.push(applicationData);
            localStorage.setItem(appsKey, JSON.stringify(applications));
            
            // Record application event in company analytics
            this.updateAnalyticsLog(applicationData.companyId, 'applicationReceived');
            
            return applicationId;
        },
        
        /**
         * @function getCompanyApplications
         * @description Retrieves all applications received by a specific company.
         * @param {string} companyId - Company identifier
         * @returns {Array<Object>} Array of application objects for the company
         */
        getCompanyApplications: function(companyId) {
            const appsKey = 'applications';
            const applications = JSON.parse(localStorage.getItem(appsKey)) || [];
            return applications.filter(app => app.companyId === companyId);
        },
        
        /**
         * @function updateApplicationStatus
         * @description Updates the status of a job application (e.g., pending →
         *              reviewed → accepted/rejected). Used by companies to
         *              manage application workflow.
         * @param {string} applicationId - Unique application identifier
         * @param {string} status - New status value
         * @returns {boolean} true if application was found and updated, false otherwise
         * @sideeffect Updates application object in global applications array
         */
        updateApplicationStatus: function(applicationId, status) {
            const appsKey = 'applications';
            const applications = JSON.parse(localStorage.getItem(appsKey)) || [];
            const appIndex = applications.findIndex(app => app.applicationId === applicationId);
            if (appIndex > -1) {
                applications[appIndex].status = status;
                localStorage.setItem(appsKey, JSON.stringify(applications));
                return true;
            }
            return false;
        },
        
        /**
         * @function hasUserApplied
         * @description Checks if a user has already applied to a specific job.
         *              Used to prevent duplicate applications.
         * @param {string} userEmail - Applicant's email
         * @param {string} jobId - Job identifier to check
         * @returns {boolean} true if user has a non-rejected application for this job
         * @businessLogic Considers only non-rejected applications as "applied"
         *                status to allow reapplication after rejection
         */
        hasUserApplied: function(userEmail, jobId) {
            const appsKey = 'applications';
            const applications = JSON.parse(localStorage.getItem(appsKey)) || [];
            return applications.some(app => 
                app.applicantEmail === userEmail && 
                app.jobId === jobId &&
                app.status !== 'rejected'
            );
        },
        
        // ============================================================================
        // ANALYTICS AND REPORTING
        // ============================================================================
        
        /**
         * @function updateAnalyticsLog
         * @description Records analytics events (job postings, applications)
         *              with daily aggregation. Creates or updates daily entries.
         * @param {string} companyId - Company identifier for analytics segregation
         * @param {string} eventType - Type of event: 'jobPosted' or 'applicationReceived'
         * @sideeffect Creates/updates analytics log array in LocalStorage under
         *             key `analytics_log_${companyId}`
         * @businessLogic Aggregates counts per day (date string as key).
         *                Maintains separate total for jobs and applications.
         */
        updateAnalyticsLog: function(companyId, eventType) {
            // Get current date in YYYY-MM-DD format for daily aggregation
            const today = new Date().toISOString().split('T')[0];
            const key = `analytics_log_${companyId}`;
            let log = JSON.parse(localStorage.getItem(key)) || [];
            
            // Find or create today's analytics entry
            let todayEntry = log.find(entry => entry.date === today);
            if (!todayEntry) {
                todayEntry = { date: today, totalJobs: 0, totalApplications: 0 };
                log.push(todayEntry);
            }
            
            // Increment appropriate counter based on event type
            if (eventType === 'jobPosted') {
                todayEntry.totalJobs++;
            } else if (eventType === 'applicationReceived') {
                todayEntry.totalApplications++;
            }
            
            localStorage.setItem(key, JSON.stringify(log));
        },
        
        /**
         * @function getAnalyticsLog
         * @description Retrieves analytics log for a specific company.
         * @param {string} companyId - Company identifier
         * @returns {Array<Object>} Array of daily analytics objects containing:
         *          - date: ISO date string (YYYY-MM-DD)
         *          - totalJobs: Number of jobs posted that day
         *          - totalApplications: Number of applications received that day
         */
        getAnalyticsLog: function(companyId) {
            const key = `analytics_log_${companyId}`;
            return JSON.parse(localStorage.getItem(key)) || [];
        },
        
        // ============================================================================
        // SESSION MANAGEMENT
        // ============================================================================
        
        /**
         * @function updateCurrentUser
         * @description Sets the currently logged-in user's email in session storage.
         *              Used to maintain login state across page reloads.
         * @param {string} email - Email of logged-in user
         * @sideeffect Stores email in LocalStorage under key 'currentUser'
         * @note This is separate from user data storage - only stores reference
         */
        updateCurrentUser: function(email) {
            localStorage.setItem('currentUser', email);
        },
        
        /**
         * @function getCurrentUser
         * @description Retrieves the currently logged-in user's full profile.
         * @returns {Object|null} Current user object if logged in, null otherwise
         * @sideeffect Reads from LocalStorage and fetches user data by email
         */
        getCurrentUser: function() {
            const email = localStorage.getItem('currentUser');
            return email ? this.getUser(email) : null;
        },
        
        /**
         * @function clearCurrentUser
         * @description Logs out current user by removing session reference.
         * @sideeffect Removes 'currentUser' key from LocalStorage
         */
        clearCurrentUser: function() {
            localStorage.removeItem('currentUser');
        },
        
        /**
         * @function updateCurrentCompany
         * @description Sets the currently logged-in company admin in session storage.
         * @param {string} companyId - Company identifier
         * @sideeffect Stores companyId in LocalStorage under key 'currentCompany'
         */
        updateCurrentCompany: function(companyId) {
            localStorage.setItem('currentCompany', companyId);
        },
        
        /**
         * @function getCurrentCompany
         * @description Retrieves the currently logged-in company's full profile.
         * @returns {Object|null} Current company object if logged in, null otherwise
         */
        getCurrentCompany: function() {
            const companyId = localStorage.getItem('currentCompany');
            return companyId ? this.getCompany(companyId) : null;
        },
        
        /**
         * @function clearCurrentCompany
         * @description Logs out current company admin by removing session reference.
         * @sideeffect Removes 'currentCompany' key from LocalStorage
         */
        clearCurrentCompany: function() {
            localStorage.removeItem('currentCompany');
        },
        
        // ============================================================================
        // DEVELOPMENT AND TESTING UTILITIES
        // ============================================================================
        
        /**
         * @function initializeSampleData
         * @description Populates LocalStorage with sample data for testing/demo.
         *              Only runs if LocalStorage is completely empty.
         * @sideeffect Creates sample company, user, and job posting
         * @warning For development only - should be removed or disabled in production
         *          to prevent overwriting real user data
         */
        initializeSampleData: function() {
            // Safety check: Only initialize if LocalStorage is empty
            // Prevents overwriting existing user data
            if (localStorage.length === 0) {
                // Create sample company with generated ID
                const companyId = 'comp_' + Date.now();
                const companyData = {
                    companyId: companyId,
                    name: 'Sample Corporation',
                    adminEmail: 'admin@sample.com',
                    password: 'admin123'  // SECURITY RISK: Plain text password
                };
                this.saveCompany(companyId, companyData);
                
                // Create sample job seeker user
                const userData = {
                    email: 'user@example.com',
                    password: 'password123',  // SECURITY RISK: Plain text password
                    name: 'John Doe'
                };
                this.saveUser('user@example.com', userData);
                
                // Create sample job posting
                const jobId = 'job_' + Date.now();
                const jobData = {
                    jobId: jobId,
                    companyId: companyId,
                    title: 'Frontend Developer',
                    companyName: 'Sample Corporation',
                    location: 'Lagos, Nigeria',
                    category: 'Technology',
                    salary: '₦150,000 - ₦250,000',
                    description: 'We are looking for a skilled Frontend Developer to join our team.',
                    companyEmail: 'admin@sample.com',
                    postedAt: new Date().toISOString(),
                    status: 'approved'  // Pre-approved for immediate visibility
                };
                this.saveJob(jobId, jobData);
            }
        }
    };

    // ============================================================================
    // UI UTILITIES MODULE
    // ============================================================================
    /**
     * @namespace UI
     * @description UI manipulation utilities for toast notifications and
     *              user information updates. Handles visual feedback and
     *              dynamic content updates.
     */
    const UI = {
        /**
         * @function showToast
         * @description Displays a temporary toast notification with configurable
         *              type (success, error, info). Uses CSS transitions for
         *              smooth appearance and auto-dismissal after 3 seconds.
         * @param {string} message - Text content to display in toast
         * @param {string} [type='success'] - Notification type: 'success', 'error', or 'info'
         * @sideeffect Modifies DOM: Updates toast element content, classes, and visibility
         * @sideeffect Sets timeout for auto-dismissal
         * @UX Provides immediate feedback for user actions (saves, errors, info)
         */
        showToast: function(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toast-icon');
            const toastMessage = document.getElementById('toast-message');
            
            // Configure icon and color based on notification type
            if (type === 'success') {
                toastIcon.textContent = 'check_circle';
                toastIcon.className = 'material-symbols-outlined text-green-400';
            } else if (type === 'error') {
                toastIcon.textContent = 'error';
                toastIcon.className = 'material-symbols-outlined text-red-400';
            } else {
                toastIcon.textContent = 'info';
                toastIcon.className = 'material-symbols-outlined text-blue-400';
            }
            
            // Update message text
            toastMessage.textContent = message;
            
            // Animate toast into view
            toast.classList.remove('opacity-0', '-translate-y-10');
            toast.classList.add('opacity-100', 'translate-y-0');
            
            // Auto-dismiss after 3 seconds (standard UX pattern)
            setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-y-0');
                toast.classList.add('opacity-0', '-translate-y-10');
            }, 3000);
        },
        
        /**
         * @function updateSlideOverUser
         * @description Updates the user information panel (slide-over menu)
         *              based on current authentication state. Shows different
         *              UI for company admins vs. regular users vs. logged-out state.
         * @sideeffect Modifies DOM: Updates text content and icons in slide-over
         * @dependency Relies on DataStore.getCurrentUser() and getCurrentCompany()
         * @businessLogic Determines display mode based on authentication:
         *                - Company admin: Shows company info with admin icon
         *                - Regular user: Shows user info with person icon
         *                - Logged out: Shows placeholder with sign-in prompt
         */
        updateSlideOverUser: function() {
            const currentUser = DataStore.getCurrentUser();
            const currentCompany = DataStore.getCurrentCompany();
            
            // DOM elements in slide-over panel
            const userIcon = document.getElementById('slide-user-icon');
            const userName = document.getElementById('slide-user-name');
            const userEmail = document.getElementById('slide-user-email');
            const logoutBtn = document.getElementById('slide-logout-btn');
            
            if (currentCompany) {
                // ADMIN MODE: Company administrator is logged in
                userIcon.textContent = 'admin_panel_settings';
                userName.textContent = currentCompany.name || 'Company Admin';
                userEmail.textContent = currentCompany.adminEmail || 'Administrator';
                logoutBtn.innerHTML = '<span class="material-symbols-outlined text-gray-600 dark:text-gray-400">logout</span><span class="text-base font-normal text-red-500">Log Out Admin</span>';
            } else if (currentUser) {
                // USER MODE: Regular job seeker is logged in
                userIcon.textContent = 'person';
                userName.textContent = currentUser.name || 'Job Seeker';
                userEmail.textContent = currentUser.email;
                logoutBtn.innerHTML = '<span class="material-symbols-outlined text-gray-600 dark:text-gray-400">logout</span><span class="text-base font-normal text-red-500">Log Out</span>';
            } else {
                // DEFAULT: No authentication (logged out state)
                userIcon.textContent = 'person';
                userName.textContent = 'User Account';
                userEmail.textContent = 'Sign in to view details';
                logoutBtn.innerHTML = '<span class="material-symbols-outlined text-gray-600 dark:text-gray-400">logout</span><span class="text-base font-normal text-red-500">Sign In</span>';
            }
        }
    };

    // ============================================================================
    // NAVIGATION MODULE - SCREEN MANAGEMENT AND AUTHENTICATION
    // ============================================================================
    /**
     * @namespace Navigation
     * @description Manages screen navigation, authentication gating, and UI state
     *              synchronization across the application. Controls which screen
     *              is visible and enforces access rules based on user roles.
     */
    const Navigation = {
        /**
         * @property {Object} screens
         * @description DOM references to main application screens. Each screen
         *              is expected to have an 'active' CSS class controlling visibility.
         * @property {HTMLElement} screens.home - Home/welcome screen
         * @property {HTMLElement} screens.jobs - Job listing/browsing screen
         * @property {HTMLElement} screens.admin - Company admin dashboard screen
         */
        screens: {
            home: document.getElementById('home-screen'),
            jobs: document.getElementById('jobs-screen'),
            admin: document.getElementById('admin-screen')
        },
        
        /**
         * @property {Object} navButtons
         * @description DOM references to bottom navigation buttons. Used to
         *              update visual active state and attach click handlers.
         */
        navButtons: {
            home: document.getElementById('nav-home'),
            jobs: document.getElementById('nav-jobs'),
            admin: document.getElementById('nav-admin')
        },
        
        /**
         * @function switchScreen
         * @description Main navigation controller. Switches between application
         *              screens with authentication checks and UI state updates.
         * @param {string} screenName - Target screen: 'home', 'jobs', or 'admin'
         * @sideeffect Modifies DOM: Shows/hides screens, updates navigation states
         * @sideeffect Calls external functions: Jobs.showView(), UI.updateSlideOverUser()
         * @sideeffect Performs authentication checks and shows appropriate gates
         * @businessLogic Enforces access rules:
         *                - Jobs screen: Requires user OR company authentication
         *                - Admin screen: Requires company admin authentication
         *                - Home screen: Accessible to all (with auth-gated content)
         */
        switchScreen: function(screenName) {
            const currentUser = DataStore.getCurrentUser();
            const currentCompany = DataStore.getCurrentCompany();
            
            // ============================================================================
            // AUTHENTICATION GATES
            // ============================================================================
            
            // GATE: Jobs screen requires authentication (user or company)
            if (screenName === 'jobs') {
                if (!currentUser && !currentCompany) {
                    // If not authenticated at all, stay on home screen
                    if (!this.screens.home.classList.contains('active')) {
                        this.switchScreen('home');
                    }
                    // Show authentication gate on home screen instead
                    const homeAuthGate = document.getElementById('home-auth-gate');
                    const homeAuthenticated = document.getElementById('home-authenticated');
                    if (homeAuthGate) homeAuthGate.classList.remove('hidden');
                    if (homeAuthenticated) homeAuthenticated.classList.add('hidden');
                    
                    // Provide feedback to user about requirement
                    UI.showToast('Please sign in to browse jobs', 'error');
                    return;  // Stop navigation to jobs screen
                }
            }
            
            // GATE: Admin screen requires company admin authentication
            if (screenName === 'admin') {
                if (!currentCompany) {
                    // Show admin login gate and hide admin content
                    const adminGate = document.getElementById('admin-gate');
                    const adminContent = document.getElementById('admin-content');
                    if (adminGate) adminGate.classList.remove('hidden');
                    if (adminContent) adminContent.classList.add('hidden');
                    
                    // If regular user is logged in, explain they need admin credentials
                    if (currentUser) {
                        UI.showToast('Admin access requires company credentials', 'error');
                    }
                }
            }
            
            // ============================================================================
            // SCREEN SWITCHING LOGIC
            // ============================================================================
            
            // Hide all screens (remove 'active' class which controls visibility)
            Object.values(this.screens).forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Show selected screen (add 'active' class)
            this.screens[screenName].classList.add('active');
            
            // ============================================================================
            // SCREEN-SPECIFIC INITIALIZATION
            // ============================================================================
            
            // Jobs screen: Reset to listing view and configure admin-only features
            if (screenName === 'jobs') {
                // Assumes Jobs module exists with showView() function
                Jobs.showView('listing');
                
                // Show/hide "Post Job" button based on admin privileges
                const postJobBtn = document.getElementById('open-post-job');
                if (postJobBtn) {
                    if (currentCompany) {
                        // Company admin: Show button and set handler
                        postJobBtn.style.display = 'flex';
                        postJobBtn.onclick = () => Jobs.showView('post');
                    } else {
                        // Regular user: Hide button and remove handler
                        postJobBtn.style.display = 'none';
                        postJobBtn.onclick = null;
                    }
                }
            }
            
            // ============================================================================
            // UI STATE UPDATES
            // ============================================================================
            
            // Update navigation button visual states
            this.updateNavButtons(screenName);
            
            // Update authentication-dependent UI across all screens
            this.updateAuthUI();
            
            // Update user info in slide-over panel
            UI.updateSlideOverUser();
        },
        
        /**
         * @function updateNavButtons
         * @description Updates visual state of bottom navigation buttons to
         *              indicate active screen. Uses CSS classes and Material
         *              Symbols font variations.
         * @param {string} activeScreen - Name of currently active screen
         * @sideeffect Modifies DOM: Updates classes and font properties of nav buttons
         * @visualFeedback Changes button color, icon fill, and label weight
         */
        updateNavButtons: function(activeScreen) {
            Object.entries(this.navButtons).forEach(([screen, btn]) => {
                const icon = btn.querySelector('.material-symbols-outlined');
                const label = btn.querySelector('span.text-\\[10px\\]');
                
                if (screen === activeScreen) {
                    // Active state: Primary color, filled icon, bold label
                    btn.classList.remove('text-gray-400');
                    btn.classList.add('text-primary');
                    icon.style.fontVariationSettings = "'FILL' 1";
                    label.classList.remove('font-medium');
                    label.classList.add('font-bold');
                } else {
                    // Inactive state: Gray color, outlined icon, medium weight label
                    btn.classList.remove('text-primary');
                    btn.classList.add('text-gray-400');
                    icon.style.fontVariationSettings = "'FILL' 0";
                    label.classList.remove('font-bold');
                    label.classList.add('font-medium');
                }
            });
        },
        
        /**
         * @function updateAuthUI
         * @description Synchronizes UI across all screens based on authentication
         *              state. Shows/hides authentication gates, updates welcome
         *              messages, and loads appropriate data for each screen.
         * @sideeffect Modifies DOM: Multiple elements across different screens
         * @sideeffect Calls external functions: Home.loadSavedJobs(), Home.loadAppliedJobs(),
         *             Admin.loadDashboardData(), UI.updateSlideOverUser(), SlideOver.open()
         * @businessLogic Maintains consistent authentication state across entire UI
         */
        updateAuthUI: function() {
            const currentUser = DataStore.getCurrentUser();
            const currentCompany = DataStore.getCurrentCompany();
            
            // ============================================================================
            // HOME SCREEN AUTHENTICATION STATE
            // ============================================================================
            
            const homeAuthGate = document.getElementById('home-auth-gate');
            const homeAuthenticated = document.getElementById('home-authenticated');
            const homeWelcome = document.getElementById('home-welcome');
            const homeHamburgerMenu = document.getElementById('home-hamburger-menu');
            
            if (currentUser) {
                // User is logged in: Show authenticated content
                homeAuthGate.classList.add('hidden');
                homeAuthenticated.classList.remove('hidden');
                homeWelcome.textContent = `Welcome back, ${currentUser.name || 'User'}`;
                
                // Show hamburger menu (user menu) only when authenticated on home screen
                if (homeHamburgerMenu) {
                    homeHamburgerMenu.classList.remove('hidden');
                }
                
                // Load user-specific data for home screen
                // Assumes Home module exists with these functions
                Home.loadSavedJobs();
                Home.loadAppliedJobs();
            } else {
                // User is not logged in: Show authentication gate
                homeAuthGate.classList.remove('hidden');
                homeAuthenticated.classList.add('hidden');
                
                // Hide hamburger menu when not authenticated
                if (homeHamburgerMenu) {
                    homeHamburgerMenu.classList.add('hidden');
                }
            }
            
            // ============================================================================
            // ADMIN SCREEN AUTHENTICATION STATE
            // ============================================================================
            
            const adminGate = document.getElementById('admin-gate');
            const adminContent = document.getElementById('admin-content');
            
            if (currentCompany) {
                // Company admin is logged in: Show admin dashboard
                adminGate.classList.add('hidden');
                adminContent.classList.remove('hidden');
                
                // Load admin-specific data
                // Assumes Admin module exists with loadDashboardData() function
                Admin.loadDashboardData();
            } else {
                // No admin logged in: Show admin login gate
                adminGate.classList.remove('hidden');
                adminContent.classList.add('hidden');
            }
            
            // ============================================================================
            // SLIDE-OVER USER PANEL UPDATE
            // ============================================================================
            
            UI.updateSlideOverUser();

            // ============================================================================
            // HAMBURGER MENU BEHAVIOR PER ROLE
            // ============================================================================
            
            // Jobs screen hamburger menu: Only enabled for regular users (not admins)
            const jobsHamburger = document.getElementById('jobs-hamburger-menu');
            const adminHamburger = document.getElementById('admin-hamburger-menu');

            if (jobsHamburger) {
                if (currentUser && !currentCompany) {
                    // Regular user on jobs screen: Enable menu
                    jobsHamburger.style.pointerEvents = 'auto';
                    jobsHamburger.onclick = () => SlideOver.open();  // Assumes SlideOver module exists
                } else {
                    // Admin or logged out: Disable menu
                    jobsHamburger.style.pointerEvents = 'none';
                    jobsHamburger.onclick = null;
                }
            }

            if (adminHamburger) {
                if (currentCompany) {
                    // Admin on admin screen: Enable menu
                    adminHamburger.style.pointerEvents = 'auto';
                    adminHamburger.onclick = () => SlideOver.open();  // Assumes SlideOver module exists
                } else {
                    // Non-admin: Disable menu
                    adminHamburger.style.pointerEvents = 'none';
                    adminHamburger.onclick = null;
                }
            }
        }
      // ===== HOME SCREEN FUNCTIONALITY =====

/**
 * Home screen controller - Manages all authentication and user dashboard functionality for the home screen.
 * 
 * This object encapsulates the business logic for:
 * - User authentication (sign in / sign up)
 * - Displaying saved jobs for authenticated users
 * - Displaying job applications with status tracking
 * - Managing UI state for authentication forms
 * 
 * Dependencies:
 * - DataStore: Global data persistence layer (defined elsewhere)
 * - Navigation: Screen routing system (defined elsewhere) 
 * - UI: Shared UI utilities including toast notifications (defined elsewhere)
 * - SlideOver: Mobile menu component (defined elsewhere)
 */
const Home = {
    /**
     * Initializes the home screen by attaching event listeners to DOM elements.
     * This method should be called once when the home screen is first loaded.
     * 
     * Side Effects:
     * - Binds click handlers to authentication tab buttons
     * - Binds click handlers to form submission buttons  
     * - Binds keypress handlers for Enter key submission on password fields
     * - Binds click handler for hamburger menu to open slide-over panel
     * - Modifies DOM by adding event listeners
     * 
     * Assumptions:
     * - All required DOM elements with specified IDs exist in the document
     * - SlideOver.open() is defined globally
     */
    init: function() {
        // Auth tabs - Toggle between Sign In and Sign Up forms
        document.getElementById('tab-signin').addEventListener('click', () => this.switchAuthTab('signin'));
        document.getElementById('tab-signup').addEventListener('click', () => this.switchAuthTab('signup'));
        
        // Auth forms - Handle form submission via button clicks
        document.getElementById('signin-submit').addEventListener('click', () => this.signIn());
        document.getElementById('signup-submit').addEventListener('click', () => this.signUp());
        
        // Allow Enter key submission - Improves UX by enabling keyboard navigation
        document.getElementById('signin-password').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') this.signIn();
        });
        
        document.getElementById('signup-password').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') this.signUp();
        });
        
        // Hamburger menu for home screen - Opens mobile navigation panel
        document.getElementById('home-hamburger-menu').addEventListener('click', () => SlideOver.open());
    },
    
    /**
     * Switches between Sign In and Sign Up tabs on the authentication panel.
     * Updates visual state of tabs and toggles visibility of corresponding forms.
     * 
     * @param {string} tab - The tab to activate ('signin' or 'signup')
     * 
     * Side Effects:
     * - Modifies CSS classes on tab buttons to show active/inactive state
     * - Toggles 'hidden' class on form containers to show/hide forms
     * 
     * Business Logic:
     * - Active tab: primary color with bottom border indicator
     * - Inactive tab: muted gray color
     * - Only one form is visible at any time
     */
    switchAuthTab: function(tab) {
        const signinTab = document.getElementById('tab-signin');
        const signupTab = document.getElementById('tab-signup');
        const signinForm = document.getElementById('signin-form');
        const signupForm = document.getElementById('signup-form');
        
        if (tab === 'signin') {
            // Activate Sign In tab, deactivate Sign Up tab
            signinTab.classList.add('text-primary', 'border-b-2', 'border-primary');
            signinTab.classList.remove('text-[#4e6797]', 'dark:text-gray-400');
            signupTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
            signupTab.classList.add('text-[#4e6797]', 'dark:text-gray-400');
            // Show Sign In form, hide Sign Up form
            signinForm.classList.remove('hidden');
            signupForm.classList.add('hidden');
        } else {
            // Activate Sign Up tab, deactivate Sign In tab
            signupTab.classList.add('text-primary', 'border-b-2', 'border-primary');
            signupTab.classList.remove('text-[#4e6797]', 'dark:text-gray-400');
            signinTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
            signinTab.classList.add('text-[#4e6797]', 'dark:text-gray-400');
            // Show Sign Up form, hide Sign In form
            signupForm.classList.remove('hidden');
            signinForm.classList.add('hidden');
        }
    },
    
    /**
     * Authenticates a user with email and password credentials.
     * Validates input, checks credentials against stored user data,
     * and manages session state on successful authentication.
     * 
     * Side Effects:
     * - Reads values from signin-email and signin-password input fields
     * - Displays validation errors in signin-error element
     * - On success: Updates current user in DataStore, refreshes auth UI, shows toast
     * - On success: Clears form fields, shows hamburger menu
     * - On failure: Displays error message
     * 
     * Dependencies:
     * - DataStore.getUser(email): Retrieves user object from storage
     * - DataStore.updateCurrentUser(email): Sets active session
     * - Navigation.updateAuthUI(): Updates navigation based on auth state
     * - UI.showToast(): Displays notification
     * 
     * Business Rules:
     * - Both email and password are required
     * - User must exist in DataStore
     * - Password must match exactly (plain text - security note: this should be hashed in production)
     */
    signIn: function() {
        const email = document.getElementById('signin-email').value.trim();
        const password = document.getElementById('signin-password').value;
        const errorElement = document.getElementById('signin-error');
        
        // Validation: All fields must be populated
        if (!email || !password) {
            errorElement.textContent = 'Please fill in all fields';
            errorElement.classList.remove('hidden');
            return;
        }
        
        // Attempt to retrieve user from persistent storage
        const user = DataStore.getUser(email);
        
        // Authentication check: Verify user exists and password matches
        if (user && user.password === password) {
            // Success: Set session state
            DataStore.updateCurrentUser(email);
            Navigation.updateAuthUI();
            UI.showToast('Signed in successfully', 'success');
            errorElement.classList.add('hidden');
            
            // Clear form fields for security and UX
            document.getElementById('signin-email').value = '';
            document.getElementById('signin-password').value = '';
            
            // Update hamburger menu visibility - only shown to authenticated users
            const homeHamburgerMenu = document.getElementById('home-hamburger-menu');
            if (homeHamburgerMenu) {
                homeHamburgerMenu.classList.remove('hidden');
            }
        } else {
            // Authentication failed: Generic error message (doesn't reveal whether email or password was incorrect)
            errorElement.textContent = 'Invalid email or password';
            errorElement.classList.remove('hidden');
        }
    },
    
    /**
     * Registers a new user account with name, email, and password.
     * Validates input, checks for duplicate accounts, and persists user data.
     * 
     * Side Effects:
     * - Reads values from signup-name, signup-email, and signup-password input fields
     * - Displays validation errors in signup-error element
     * - On success: Saves user to DataStore, shows success toast, clears form
     * - On success: Switches to sign in tab and pre-fills email
     * 
     * Dependencies:
     * - DataStore.getUser(email): Checks for existing user
     * - DataStore.saveUser(email, userData): Persists new user
     * - UI.showToast(): Displays notification
     * - this.switchAuthTab(): Switches to sign in view
     * 
     * Business Rules:
     * - All fields (name, email, password) are required
     * - Email must be unique in the system
     * - Passwords are stored as plain text (security note: should be hashed in production)
     */
    signUp: function() {
        const name = document.getElementById('signup-name').value.trim();
        const email = document.getElementById('signup-email').value.trim();
        const password = document.getElementById('signup-password').value;
        const errorElement = document.getElementById('signup-error');
        
        // Validation: All fields must be populated
        if (!name || !email || !password) {
            errorElement.textContent = 'Please fill in all fields';
            errorElement.classList.remove('hidden');
            return;
        }
        
        // Check if user already exists - enforce unique email constraint
        if (DataStore.getUser(email)) {
            errorElement.textContent = 'User with this email already exists';
            errorElement.classList.remove('hidden');
            return;
        }
        
        // Save user
        const userData = {
            email: email,
            password: password,
            name: name
        };
        
        DataStore.saveUser(email, userData);
        UI.showToast('Account created successfully', 'success');
        errorElement.classList.add('hidden');
        
        // Clear form for security and UX
        document.getElementById('signup-name').value = '';
        document.getElementById('signup-email').value = '';
        document.getElementById('signup-password').value = '';
        
        // Switch to sign in tab and pre-fill email for convenience
        this.switchAuthTab('signin');
        document.getElementById('signin-email').value = email;
    },
    
    /**
     * Loads and displays jobs saved by the currently authenticated user.
     * Dynamically generates job cards for each saved job.
     * 
     * Side Effects:
     * - Queries DataStore for current user and their saved jobs
     * - Clears and repopulates the saved-jobs-container element
     * - Renders either an empty state message or interactive job cards
     * - Binds click handlers to each job card for navigation to job details
     * 
     * Dependencies:
     * - DataStore.getCurrentUser(): Retrieves active session user
     * - DataStore.getUserSavedJobs(email): Retrieves user's saved jobs
     * - Navigation.switchScreen(): Navigates to jobs screen
     * - Jobs.showView(): Displays specific job details
     * 
     * Conditional Rendering:
     * - If no user is logged in: Function exits early (no rendering)
     * - If no saved jobs: Displays "No saved jobs yet" message
     * - If saved jobs exist: Renders each job as an interactive card
     * 
     * UX Behavior:
     * - Clicking a saved job navigates to jobs screen and opens job details
     * - 100ms delay allows for screen transition before loading details
     */
    loadSavedJobs: function() {
        const currentUser = DataStore.getCurrentUser();
        if (!currentUser) return;
        
        const savedJobs = DataStore.getUserSavedJobs(currentUser.email);
        const container = document.getElementById('saved-jobs-container');
        
        container.innerHTML = '';
        
        // Empty state handling
        if (savedJobs.length === 0) {
            container.innerHTML = `
                <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                    <p class="text-gray-500 dark:text-gray-400">No saved jobs yet</p>
                </div>
            `;
            return;
        }
        
        // Render each saved job as an interactive card
        savedJobs.forEach(job => {
            const jobCard = document.createElement('div');
            jobCard.className = 'bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer saved-job-card';
            jobCard.dataset.jobId = job.jobId;
            
            jobCard.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <div class="flex-1">
                        <h4 class="text-base font-bold text-[#0e121b] dark:text-white">${job.title}</h4>
                        <div class="flex items-center text-sm text-[#4e6797] dark:text-gray-400 mt-1">
                            <span class="material-symbols-outlined text-[18px] mr-1">location_on</span>
                            <span>${job.location}</span>
                        </div>
                        <div class="flex items-center justify-between mt-3">
                            <span class="text-primary font-bold text-sm bg-primary/10 px-3 py-1 rounded-full">${job.salary}</span>
                            <span class="text-xs text-gray-400 uppercase font-semibold">${job.category}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Navigate to job details when card is clicked
            jobCard.addEventListener('click', () => {
                Navigation.switchScreen('jobs');
                // Delay allows screen transition to complete before loading details
                setTimeout(() => {
                    Jobs.showView('details', job.jobId);
                }, 100);
            });
            
            container.appendChild(jobCard);
        });
    },
    
    /**
     * Loads and displays job applications submitted by the currently authenticated user.
     * Shows application status and applied date for each application.
     * 
     * Side Effects:
     * - Queries DataStore for current user and their applications
     * - Fetches full job details for each application
     * - Clears and repopulates the applied-jobs-container element
     * - Renders empty state message or interactive application cards with status badges
     * - Binds click handlers to each application card for job details navigation
     * 
     * Dependencies:
     * - DataStore.getCurrentUser(): Retrieves active session user
     * - DataStore.getUserApplications(email): Retrieves user's applications
     * - DataStore.getJob(jobId): Retrieves full job details
     * - Navigation.switchScreen(): Navigates to jobs screen
     * - Jobs.showView(): Displays specific job details
     * 
     * Business Logic:
     * - Applications have three possible statuses: pending, approved, rejected
     * - Status is visually represented by color-coded badges
     * - Applications without corresponding job data are skipped (data integrity fallback)
     * 
     * UX Behavior:
     * - Clicking an application navigates to the specific job details
     * - Applied date is formatted to locale-specific string
     * - 100ms delay allows for smooth screen transition
     */
    loadAppliedJobs: function() {
        const currentUser = DataStore.getCurrentUser();
        if (!currentUser) return;
        
        const applications = DataStore.getUserApplications(currentUser.email);
        const container = document.getElementById('applied-jobs-container');
        
        container.innerHTML = '';
        
        // Empty state handling
        if (applications.length === 0) {
            container.innerHTML = `
                <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                    <p class="text-gray-500 dark:text-gray-400">No applications yet</p>
                </div>
            `;
            return;
        }
        
        // Render each application as an interactive card
        applications.forEach(app => {
            const job = DataStore.getJob(app.jobId);
            if (!job) return; // Skip if job data is missing (defensive programming)
            
            const jobCard = document.createElement('div');
            jobCard.className = 'bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer';
            jobCard.dataset.jobId = job.jobId;
            
            // Status badge configuration - Visual feedback for application state
            let statusColor = 'bg-yellow-500';
            let statusText = 'Pending';
            if (app.status === 'approved') {
                statusColor = 'bg-green-500';
                statusText = 'Approved';
            } else if (app.status === 'rejected') {
                statusColor = 'bg-red-500';
                statusText = 'Rejected';
            }
            
            jobCard.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <div class="flex-1">
                        <h4 class="text-base font-bold text-[#0e121b] dark:text-white">${job.title}</h4>
                        <div class="flex items-center text-sm text-[#4e6797] dark:text-gray-400 mt-1">
                            <span class="material-symbols-outlined text-[18px] mr-1">location_on</span>
                            <span>${job.location}</span>
                        </div>
                        <div class="flex items-center justify-between mt-3">
                            <span class="text-primary font-bold text-sm bg-primary/10 px-3 py-1 rounded-full">${job.salary}</span>
                            <span class="text-xs ${statusColor} text-white px-2 py-1 rounded-full">${statusText}</span>
                        </div>
                        <div class="text-xs text-gray-500 mt-2">
                            Applied: ${new Date(app.appliedAt).toLocaleDateString()}
                        </div>
                    </div>
                </div>
            `;
            
            // Navigate to job details when application card is clicked
            jobCard.addEventListener('click', () => {
                Navigation.switchScreen('jobs');
                // Delay ensures screen transition completes before loading details
                setTimeout(() => {
                    Jobs.showView('details', job.jobId);
                }, 100);
            });
            
            container.appendChild(jobCard);
        });
    }
};

// ===== JOBS SCREEN FUNCTIONALITY =====

/**
 * Jobs screen controller - Manages all job-related functionality including listing,
 * filtering, viewing details, applying, saving, and posting jobs.
 * 
 * This object encapsulates the complete job lifecycle:
 * - Job discovery (listing, filtering, searching)
 * - Job interaction (saving, applying)
 * - Job details viewing
 * - Job posting (company/admin only)
 * 
 * State Management:
 * - Tracks current view (listing/details/post)
 * - Maintains active filters and search criteria
 * - Persists filter selections during session
 * 
 * Dependencies:
 * - DataStore: Global data persistence layer (defined elsewhere)
 * - Navigation: Screen routing system (defined elsewhere)
 * - UI: Shared UI utilities including toast notifications (defined elsewhere)
 * - SlideOver: Mobile menu component (defined elsewhere)
 */
const Jobs = {
    /**
     * Current view state of the jobs screen.
     * @type {string} One of: 'listing', 'details', 'post'
     */
    currentView: 'listing',
    
    /**
     * Currently selected job category filter.
     * @type {string|null} Category identifier or null if no filter applied
     */
    selectedCategory: null,
    
    /**
     * Currently selected salary range filter.
     * @type {string|null} Salary range identifier or null if no filter applied
     */
    selectedSalary: null,
    
    /**
     * ID of the currently viewed job (when in details view).
     * @type {string|null}
     */
    currentJobId: null,
    
    /**
     * Current jobs filter type for the listing view.
     * Controls which subset of jobs to display.
     * @type {string} One of: 'all', 'saved', 'applied'
     */
    currentFilter: 'all',
    
    /**
     * Initializes the jobs screen by attaching event listeners to DOM elements.
     * Configures all interactive UI components including buttons, filters, and forms.
     * Should be called once when the jobs screen is first loaded.
     * 
     * Side Effects:
     * - Checks company authentication status to conditionally show/hide post job button
     * - Binds click handlers for view navigation (back buttons)
     * - Binds click handlers for job actions (apply, save)
     * - Binds click handlers for job posting form (submit, draft, cancel)
     * - Binds click handlers for category and salary filter chips
     * - Binds input handler for search field
     * - Binds click handlers for filter chips (all/saved/applied)
     * - Binds click handler for hamburger menu
     * - Triggers initial jobs loading
     * 
     * Assumptions:
     * - All required DOM elements with specified IDs exist in the document
     * - DataStore.getCurrentCompany() returns company object or null
     * - SlideOver.open() is defined globally
     */
    init: function() {
        const currentCompany = DataStore.getCurrentCompany();
        
        // Post Job button - visibility controlled by company authentication status
        const postJobBtn = document.getElementById('open-post-job');
        if (postJobBtn) {
            if (currentCompany) {
                // Company admin is authenticated - show post job button
                postJobBtn.style.display = 'flex';
                postJobBtn.addEventListener('click', () => this.showView('post'));
            } else {
                // No company authenticated - hide post job button
                postJobBtn.style.display = 'none';
            }
        }
        
        // View switching - Back buttons for navigation hierarchy
        document.getElementById('back-from-details').addEventListener('click', () => this.showView('listing'));
        document.getElementById('back-from-post').addEventListener('click', () => this.showView('listing'));
        
        // Job actions - Primary interactions for job details view
        document.getElementById('apply-job').addEventListener('click', () => this.applyForJob());
        document.getElementById('save-job-detail').addEventListener('click', () => this.toggleSaveJob());
        
        // Post job form - Job creation workflow
        document.getElementById('submit-job-post').addEventListener('click', () => this.submitJobPost());
        document.getElementById('save-draft').addEventListener('click', () => this.saveDraft());
        document.getElementById('cancel-post').addEventListener('click', () => this.showView('listing'));
        
        // Category chips - Job type filtering
        document.querySelectorAll('.category-chip').forEach(chip => {
            chip.addEventListener('click', (e) => {
                const category = chip.dataset.category;
                this.selectCategory(category);
            });
        });
        
        // Salary chips - Salary range filtering
        document.querySelectorAll('.salary-chip').forEach(chip => {
            chip.addEventListener('click', (e) => {
                const salary = chip.dataset.salary;
                this.selectSalary(salary);
            });
        });
        
        // Custom salary input toggle - Shows custom salary input when 'custom' chip is selected
        document.querySelectorAll('.salary-chip').forEach(chip => {
            chip.addEventListener('click', (e) => {
                if (chip.dataset.salary === 'custom') {
                    document.getElementById('custom-salary-input').classList.remove('hidden');
                } else {
                    document.getElementById('custom-salary-input').classList.add('hidden');
                }
            });
        });
        
        // Search functionality - Real-time job filtering as user types
        document.getElementById('job-search').addEventListener('input', (e) => {
            this.filterJobs();
        });
        
        // Filter chips - All/Saved/Applied view filtering
        document.querySelectorAll('.filter-chip[data-filter]').forEach(chip => {
            chip.addEventListener('click', (e) => {
                const filter = chip.dataset.filter;
                this.setFilter(filter);
            });
        });
        
        // Hamburger menu for jobs screen - Opens mobile navigation panel
        document.getElementById('jobs-hamburger-menu').addEventListener('click', () => SlideOver.open());
        
        // Load jobs on initialization - Populates initial job listing
        this.loadJobs();
    },
    
    /**
     * Sets the current job filter type and refreshes the job listing.
     * Updates the active state of filter chips in the UI.
     * 
     * @param {string} filter - Filter type to apply: 'all', 'saved', or 'applied'
     * 
     * Side Effects:
     * - Removes 'active' class from all filter chips
     * - Adds 'active' class to the selected filter chip
     * - Updates this.currentFilter with the new filter value
     * - Triggers a reload of the job listing
     * 
     * Business Logic:
     * - 'all': Shows all approved jobs
     * - 'saved': Shows only jobs saved by current user (requires authentication)
     * - 'applied': Shows only jobs applied to by current user (requires authentication)
     */
    setFilter: function(filter) {
        // Update active state on filter chips
        document.querySelectorAll('.filter-chip').forEach(chip => {
            chip.classList.remove('active');
            if (chip.dataset.filter === filter) {
                chip.classList.add('active');
            }
        });
        
        this.currentFilter = filter;
        this.loadJobs();
    },
    
    /**
     * Switches between the different view modes of the jobs screen.
     * Manages view visibility, page title, and loads appropriate data.
     * 
     * @param {string} viewName - Target view: 'listing', 'details', or 'post'
     * @param {string|null} jobId - Required for 'details' view, specifies which job to display
     * 
     * Side Effects:
     * - Hides all views by removing 'active' class
     * - Shows selected view by adding 'active' class
     * - Updates page title text content
     * - Updates this.currentView with the new view name
     * - For 'details': Loads job data and stores job ID
     * - For 'listing': Refreshes job list
     * - For 'post': Clears the post job form
     * 
     * Security:
     * - 'post' view requires company authentication
     * - Unauthenticated access attempt shows error and redirects to admin screen
     * 
     * Dependencies:
     * - DataStore.getCurrentCompany(): Verifies company authentication
     * - UI.showToast(): Displays error message for unauthorized access
     * - Navigation.switchScreen(): Redirects to admin screen for company login
     */
    showView: function(viewName, jobId = null) {
        const currentCompany = DataStore.getCurrentCompany();
        
        // GATE: Post view requires admin authentication
        if (viewName === 'post' && !currentCompany) {
            UI.showToast('Company admin access required to post jobs', 'error');
            Navigation.switchScreen('admin');
            return;
        }
        
        // Hide all views
        document.querySelectorAll('.jobs-view').forEach(view => {
            view.classList.remove('active');
        });
        
        // Show selected view - Map view name to DOM element ID
        const viewId = viewName === 'details' ? 'job-details-view' : 
                      viewName === 'post' ? 'post-job-view' : 'jobs-listing-view';
        document.getElementById(viewId).classList.add('active');
        
        // Update page title for context awareness
        const pageTitle = document.getElementById('jobs-page-title');
        if (viewName === 'listing') pageTitle.textContent = 'Jobs';
        else if (viewName === 'details') pageTitle.textContent = 'Job Details';
        else if (viewName === 'post') pageTitle.textContent = 'Post a Job';
        
        this.currentView = viewName;
        
        // If showing details view, load job data
        if (viewName === 'details' && jobId) {
            this.loadJobDetails(jobId);
            this.currentJobId = jobId;
        }
        
        // If showing listing view, refresh job list
        if (viewName === 'listing') {
            this.loadJobs();
        }
        
        // If showing post view, clear form
        if (viewName === 'post') {
            this.clearPostForm();
        }
    },
    
    /**
     * Loads and displays job listings based on current filter and search criteria.
     * Core method for populating the main jobs listing view.
     * 
     * Side Effects:
     * - Queries DataStore for all jobs and user-specific data (saved/applied)
     * - Applies multiple filter layers: status, user filters, search, category, salary
     * - Clears and repopulates the jobs-list-container element
     * - Renders appropriate empty state messages based on context
     * - Creates interactive job cards with applied/saved indicators
     * - Binds click handlers to each job card for details navigation
     * 
     * Dependencies:
     * - DataStore.getCurrentUser(): For user-specific filtering
     * - DataStore.getAllJobs(): Retrieves all jobs in the system
     * - DataStore.getUserSavedJobs(): For saved jobs filter
     * - DataStore.getUserApplications(): For applied jobs filter
     * - DataStore.hasUserApplied(): For applied badge display
     * 
     * Filtering Logic (applied in order):
     * 1. Base: Only jobs with status === 'approved' are visible to users
     * 2. View Filter: 'saved' or 'applied' (requires authentication)
     * 3. Search: Text match in title, company, or location
     * 4. Category: Exact match on job category
     * 5. Salary: Partial match (converts salary range format)
     * 
     * Empty State Messages:
     * - Context-aware messages based on active filters
     * - Generic: "No jobs available yet. Be the first to post one!"
     * - Saved: "No saved jobs found"
     * - Applied: "No applied jobs found"
     * - Search: "No jobs match your search criteria"
     */
    loadJobs: function() {
        const currentUser = DataStore.getCurrentUser();
        const jobs = DataStore.getAllJobs();
        const container = document.getElementById('jobs-list-container');
        const searchTerm = document.getElementById('job-search').value.toLowerCase();
        
        container.innerHTML = '';
        
        // Filter jobs based on current filter
        let filteredJobs = jobs.filter(job => job.status === 'approved');
        
        // Apply user-specific filters (saved/applied) if user is authenticated
        if (this.currentFilter === 'saved' && currentUser) {
            const savedJobIds = DataStore.getUserSavedJobs(currentUser.email).map(job => job.jobId);
            filteredJobs = filteredJobs.filter(job => savedJobIds.includes(job.jobId));
        } else if (this.currentFilter === 'applied' && currentUser) {
            const appliedJobIds = DataStore.getUserApplications(currentUser.email).map(app => app.jobId);
            filteredJobs = filteredJobs.filter(job => appliedJobIds.includes(job.jobId));
        }
        
        // Apply additional filters
        filteredJobs = filteredJobs.filter(job => {
            // Text search across multiple job fields
            const matchesSearch = searchTerm === '' || 
                job.title.toLowerCase().includes(searchTerm) || 
                job.companyName.toLowerCase().includes(searchTerm) ||
                job.location.toLowerCase().includes(searchTerm);
            
            // Category filter - exact match
            const matchesCategory = !this.selectedCategory || job.category === this.selectedCategory;
            
            // Salary filter - partial match with formatting normalization
            const matchesSalary = !this.selectedSalary || 
                (job.salary && job.salary.includes(this.selectedSalary.replace('₦', '').replace('k', '000')));
            
            return matchesSearch && matchesCategory && matchesSalary;
        });
        
        // Empty state handling - Context-specific messages
        if (filteredJobs.length === 0) {
            let message = 'No jobs available yet. Be the first to post one!';
            if (this.currentFilter === 'saved') message = 'No saved jobs found';
            if (this.currentFilter === 'applied') message = 'No applied jobs found';
            if (searchTerm !== '') message = 'No jobs match your search criteria';
            
            container.innerHTML = `
                <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                    <p class="text-gray-500 dark:text-gray-400">${message}</p>
                </div>
            `;
            return;
        }
        
        // Render each job as an interactive card
        filteredJobs.forEach(job => {
            const jobCard = document.createElement('div');
            jobCard.className = 'job-card bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer';
            jobCard.dataset.jobId = job.jobId;
            
            // Check if job is saved by current user (for UI indicators)
            const currentUser = DataStore.getCurrentUser();
            let isSaved = false;
            let hasApplied = false;
            if (currentUser) {
                const savedJobs = DataStore.getUserSavedJobs(currentUser.email);
                isSaved = savedJobs.some(savedJob => savedJob.jobId === job.jobId);
                hasApplied = DataStore.hasUserApplied(currentUser.email, job.jobId);
            }
            
            // Applied badge - Visual indicator for jobs user has already applied to
            const appliedBadge = hasApplied ? '<span class="applied-badge">Applied</span>' : '';
            
            jobCard.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <div class="flex-1">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-bold text-[#0e121b] dark:text-white">${job.title}</h3>
                            ${appliedBadge}
                        </div>
                        <div class="flex items-center text-sm text-[#4e6797] dark:text-gray-400 mt-1">
                            <span class="material-symbols-outlined text-[18px] mr-1">apartment</span>
                            <span class="mr-3">${job.companyName}</span>
                            <span class="material-symbols-outlined text-[18px] mr-1">location_on</span>
                            <span>${job.location}</span>
                        </div>
                        <div class="flex items-center justify-between mt-2">
                            <span class="text-primary font-bold text-sm bg-primary/10 px-3 py-1 rounded-full">${job.salary}</span>
                            <span class="text-xs text-gray-400 uppercase font-semibold">${job.category}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Navigate to job details when card is clicked
            jobCard.addEventListener('click', (e) => {
                this.showView('details', job.jobId);
            });
            
            container.appendChild(jobCard);
        });
    },
    
    /**
     * Triggers a refresh of the job listing.
     * Wrapper method for loadJobs() to be used by event handlers.
     * 
     * Side Effects:
     * - Calls this.loadJobs() to refresh the job listing
     * 
     * UX Purpose:
     * - Provides a semantic method name for filter/search event handlers
     * - Allows for future extension (debouncing, animation, etc.)
     */
    filterJobs: function() {
        this.loadJobs();
    },
    
    /**
     * Handles category chip selection/deselection for job filtering.
     * Toggles the selected category and updates UI visual state.
     * 
     * @param {string} category - Category identifier from chip dataset
     * 
     * Side Effects:
     * - Toggles this.selectedCategory (sets to category if null, null if already selected)
     * - Updates CSS classes on all category chips to show active/inactive states
     * - Triggers a reload of the job listing with new filter
     * 
     * Visual Feedback:
     * - Active chip: Primary color background with white text
     * - Inactive chip: Gray background with dark text (light/dark mode aware)
     * 
     * UX Behavior:
     * - Clicking an inactive chip activates it
     * - Clicking the active chip deactivates it (clears filter)
     * - Only one category can be active at a time
     */
    selectCategory: function(category) {
        // Toggle selection
        if (this.selectedCategory === category) {
            this.selectedCategory = null;
        } else {
            this.selectedCategory = category;
        }
        
        // Update UI
        document.querySelectorAll('.category-chip').forEach(chip => {
            if (chip.dataset.category === this.selectedCategory) {
                chip.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-[#0e121b]', 'dark:text-white');
                chip.classList.add('bg-primary', 'text-white');
            } else {
                chip.classList.remove('bg-primary', 'text-white');
                chip.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-[#0e121b]', 'dark:text-white');
            }
        });
        
        this.loadJobs();
    },
    
    /**
     * Handles salary chip selection/deselection for job filtering.
     * Toggles the selected salary range and updates UI visual state.
     * 
     * @param {string} salary - Salary range identifier from chip dataset
     * 
     * Side Effects:
     * - Toggles this.selectedSalary (
     
    };
    // Update UI
                /**
                 * Updates the visual state of salary filter chips to reflect the currently selected salary range.
                 * 
                 * This function is called when a user clicks on a salary chip in the job filtering interface.
                 * It applies visual styling to indicate the active selection and removes active styling from
                 * previously selected chips. The styling uses Tailwind CSS classes for light and dark modes.
                 * 
                 * Dependencies:
                 * - Expects DOM elements with class 'salary-chip' and a 'data-salary' attribute
                 * - Uses this.selectedSalary which is set elsewhere in the JobsListing component
                 * - Called after selection changes in the salary filter UI
                 * 
                 * Side Effects:
                 * - Directly manipulates DOM element classes to update visual appearance
                 * - No state mutation beyond class changes
                 */
                document.querySelectorAll('.salary-chip').forEach(chip => {
                    // Check if this chip's salary value matches the currently selected salary
                    if (chip.dataset.salary === this.selectedSalary) {
                        // Remove inactive styling classes
                        chip.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-[#0e121b]', 'dark:text-white');
                        // Apply active styling (primary background with white text)
                        chip.classList.add('bg-primary', 'text-white');
                    } else {
                        // Remove active styling from non-selected chips
                        chip.classList.remove('bg-primary', 'text-white');
                        // Restore default inactive styling
                        chip.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-[#0e121b]', 'dark:text-white');
                    }
                });
                
                /**
                 * Triggers a refresh of the jobs listing based on the newly applied salary filter.
                 * This ensures the job cards displayed reflect the current filter selection.
                 */
                this.loadJobs();
            },
            
            /**
             * Loads and displays detailed information for a specific job in the detail view.
             * 
             * This function populates all UI elements in the job detail panel with the selected job's data,
             * including title, location, salary, description, dynamically generated requirements,
             * and updates interactive elements (save/apply buttons) based on the current user's state.
             * 
             * @param {string} jobId - Unique identifier for the job to display
             * 
             * Dependencies:
             * - DataStore.getJob(): Retrieves job data from the central data store
             * - DataStore.getCurrentUser(): Gets the currently authenticated user
             * - DataStore.getUserSavedJobs(): Fetches saved jobs for the current user
             * - DataStore.hasUserApplied(): Checks if user has already applied to this job
             * - Assumes DOM elements with specific IDs exist in the job detail view
             * 
             * Side Effects:
             * - Updates multiple DOM elements with job details
             * - Modifies button text, enabled/disabled states, and styling classes
             * - Returns early without action if jobId is invalid
             */
            loadJobDetails: function(jobId) {
                // Attempt to retrieve the job object from the data store using the provided ID
                const job = DataStore.getJob(jobId);
                // Guard clause: exit immediately if job not found to prevent UI errors
                if (!job) return;
                
                // Update UI elements
                // Populate the detail view header with job title
                document.getElementById('detail-title').textContent = job.title;
                // Add location with bullet separator for visual formatting
                document.getElementById('detail-location').textContent = job.location + ' •';
                // Display salary or fallback text if salary is not specified
                document.getElementById('detail-salary').textContent = job.salary || '₦0 - ₦0 /yr';
                // Set the full job description text
                document.getElementById('detail-description').textContent = job.description;
                
                // Update requirements
                // Get reference to the requirements list container
                const requirementsList = document.getElementById('detail-requirements');
                // Generate dynamic requirements list based on job properties
                // This creates tailored, job-specific requirement items rather than static content
                requirementsList.innerHTML = `
                    <li class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-green-500 text-sm mt-1">check_circle</span>
                        <span class="text-gray-600 dark:text-gray-300 text-base">Experience in ${job.category} field</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-green-500 text-sm mt-1">check_circle</span>
                        <span class="text-gray-600 dark:text-gray-300 text-base">Based in ${job.location.split(',')[0] || job.location}</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-green-500 text-sm mt-1">check_circle</span>
                        <span class="text-gray-600 dark:text-gray-300 text-base">Salary expectation: ${job.salary || 'Negotiable'}</span>
                    </li>
                `;
                
                // Update save button state
                // Retrieve currently authenticated user to determine personalized interactions
                const currentUser = DataStore.getCurrentUser();
                // Get references to the save and apply buttons in the detail view
                const saveBtn = document.getElementById('save-job-detail');
                const applyBtn = document.getElementById('apply-job');
                
                // Only show saved/applied states if a user is logged in
                if (currentUser) {
                    // Fetch the user's saved jobs collection
                    const savedJobs = DataStore.getUserSavedJobs(currentUser.email);
                    // Check if this specific job exists in the user's saved jobs
                    const isSaved = savedJobs.some(savedJob => savedJob.jobId === jobId);
                    // Check if the user has already submitted an application for this job
                    const hasApplied = DataStore.hasUserApplied(currentUser.email, jobId);
                    
                    // Update save button text based on saved status
                    if (isSaved) {
                        saveBtn.innerHTML = 'Remove from Saved';
                    } else {
                        saveBtn.innerHTML = 'Save Job';
                    }
                    
                    // Update apply button state based on application status
                    if (hasApplied) {
                        // User has already applied: disable button and show success indicator
                        applyBtn.textContent = 'Applied ✓';
                        applyBtn.disabled = true;
                        applyBtn.classList.remove('bg-primary');
                        applyBtn.classList.add('bg-green-500');
                    } else {
                        // User has not applied: enable button with normal styling
                        applyBtn.textContent = 'Apply for Job';
                        applyBtn.disabled = false;
                        applyBtn.classList.remove('bg-green-500');
                        applyBtn.classList.add('bg-primary');
                    }
                }
            },
            
            /**
             * Handles the job application submission process.
             * 
             * This function validates that a user is authenticated, retrieves the current job,
             * creates an application record, persists it to the data store, and updates the UI
             * to reflect the successful application. It also triggers refreshes of dependent views.
             * 
             * Dependencies:
             * - DataStore.getCurrentUser(): Validates authentication state
             * - DataStore.getJob(): Retrieves job data
             * - DataStore.createApplication(): Persists application to data store
             * - UI.showToast(): Displays notification messages
             * - Navigation.switchScreen(): Redirects unauthenticated users
             * - Home.loadAppliedJobs(): Refreshes home view's applied jobs section
             * - Admin.loadDashboardData(): Refreshes admin dashboard if applicable
             * 
             * Side Effects:
             * - Creates new application record in data store
             * - Displays success/error toast notifications
             * - Updates apply button state (text, disabled, styling)
             * - Triggers refresh of applied jobs in home view
             * - Triggers admin dashboard refresh if company admin is viewing
             * - May redirect unauthenticated users to home screen
             * 
             * @returns {void} Returns early without action if user not authenticated or job not found
             */
            applyForJob: function() {
                // Verify user authentication before allowing application submission
                const currentUser = DataStore.getCurrentUser();
                if (!currentUser) {
                    // User is not logged in: show error and redirect to home for sign-in
                    UI.showToast('Please sign in to apply for jobs', 'error');
                    Navigation.switchScreen('home');
                    return;
                }
                
                // Retrieve the complete job data for the currently viewed job
                const job = DataStore.getJob(this.currentJobId);
                // Guard clause: exit if job no longer exists in the system
                if (!job) return;
                
                /**
                 * Construct application data object with all necessary fields.
                 * This follows the expected schema for DataStore.createApplication().
                 * applicationId is not included here as it's generated by the DataStore.
                 */
                const applicationData = {
                    jobId: job.jobId,                     // Reference to the job being applied for
                    companyId: job.companyId,             // Reference to the company offering the job
                    applicantEmail: currentUser.email,     // Unique identifier for the applicant
                    applicantName: currentUser.name || 'Anonymous', // Display name, fallback if not set
                    jobTitle: job.title,                  // Denormalized for quick display without joins
                    companyName: job.companyName,         // Denormalized for quick display without joins
                    appliedAt: new Date().toISOString()    // Timestamp in ISO format for consistent sorting
                };
                
                // Persist the application to the data store
                DataStore.createApplication(applicationData);
                // Display success notification to the user
                UI.showToast(`Application submitted for ${job.title}`, 'success');
                
                // Update button state
                // Get reference to the apply button in the detail view
                const applyBtn = document.getElementById('apply-job');
                // Change button text to indicate successful application
                applyBtn.textContent = 'Applied ✓';
                // Disable button to prevent duplicate submissions
                applyBtn.disabled = true;
                // Update styling to show success state (green) instead of primary action color
                applyBtn.classList.remove('bg-primary');
                applyBtn.classList.add('bg-green-500');
                
                // Refresh home screen applied jobs
                // This ensures the user sees their newly submitted application in the "Applied" section
                Home.loadAppliedJobs();
                
                // Refresh admin dashboard if admin is viewing it
                // Check if a company admin is currently authenticated
                if (DataStore.getCurrentCompany()) {
                    // Admin is logged in, refresh their dashboard to show new application for approval
                    Admin.loadDashboardData();
                }
            },
            
            /**
             * Toggles the saved status of a job for the current user.
             * 
             * This function handles both saving and unsaving jobs. It validates user authentication,
             * checks the current saved state of the job, performs the appropriate save/remove operation,
             * updates the UI to reflect the new state, and refreshes dependent views.
             * 
             * @param {string|null} jobId - Optional job ID. If null, uses this.currentJobId from the listing context
             * @param {HTMLElement|null} buttonElement - Optional button element that triggered the action.
             *                                            Currently unused but maintained for future extensibility.
             * 
             * Dependencies:
             * - DataStore.getCurrentUser(): Validates authentication
             * - DataStore.getJob(): Retrieves job data
             * - DataStore.getUserSavedJobs(): Gets current saved jobs for the user
             * - DataStore.removeSavedJob(): Removes job from saved collection
             * - DataStore.saveJobForUser(): Adds job to saved collection
             * - UI.showToast(): Displays confirmation messages
             * - Navigation.switchScreen(): Redirects unauthenticated users
             * - Home.loadSavedJobs(): Refreshes saved jobs in home view
             * 
             * Side Effects:
             * - Modifies the user's saved jobs collection in data store
             * - Updates save button text in detail view
             * - Displays success/error toast notifications
             * - Triggers refresh of saved jobs in home view
             * - May trigger jobs listing refresh if currently filtering by 'saved'
             * - May redirect unauthenticated users to home screen
             */
            toggleSaveJob: function(jobId = null, buttonElement = null) {
                // Verify user authentication before allowing save operations
                const currentUser = DataStore.getCurrentUser();
                if (!currentUser) {
                    // User is not logged in: show error and redirect to home for sign-in
                    UI.showToast('Please sign in to save jobs', 'error');
                    Navigation.switchScreen('home');
                    return;
                }
                
                // Determine which job ID to operate on: use provided ID or fall back to current context
                const targetJobId = jobId || this.currentJobId;
                // Retrieve the job object to verify it exists before attempting save operations
                const job = DataStore.getJob(targetJobId);
                // Guard clause: exit if job no longer exists in the system
                if (!job) return;
                
                // Check if already saved
                // Fetch the user's current saved jobs collection
                const savedJobs = DataStore.getUserSavedJobs(currentUser.email);
                // Determine if the target job is already in the saved collection
                const isSaved = savedJobs.some(savedJob => savedJob.jobId === targetJobId);
                
                if (isSaved) {
                    // Remove from saved
                    DataStore.removeSavedJob(currentUser.email, targetJobId);
                    UI.showToast('Job removed from saved', 'success');
                    
                    // Update UI
                    // Get reference to the save button in the detail view
                    const saveBtn = document.getElementById('save-job-detail');
                    // Change button text to reflect that job can now be saved again
                    saveBtn.innerHTML = 'Save Job';
                } else {
                    // Add to saved
                    DataStore.saveJobForUser(currentUser.email, targetJobId);
                    UI.showToast('Job saved successfully', 'success');
                    
                    // Update UI
                    const saveBtn = document.getElementById('save-job-detail');
                    // Change button text to indicate job is now saved and can be removed
                    saveBtn.innerHTML = 'Remove from Saved';
                }
                
                // Refresh home screen saved jobs
                // This ensures the user sees their updated saved jobs collection in the home view
                Home.loadSavedJobs();
                
                // Refresh jobs list if on saved filter
                // Check if the current filter mode is set to show only saved jobs
                if (this.currentFilter === 'saved') {
                    // Reload the jobs listing to reflect the updated saved status
                    // This will hide jobs that were just unsaved or show newly saved jobs
                    this.loadJobs();
                }
            },
            
            /**
             * Resets the job posting form to its initial empty state.
             * 
             * This function clears all input fields in the job posting form, resets the selected
             * category and salary filter chips to their default unselected state, and hides the
             * custom salary input field. It is typically called after successful job submission
             * or when the user cancels/discards a job posting.
             * 
             * Dependencies:
             * - Expects DOM elements with specific IDs to exist in the job posting form
             * - Uses this.selectedCategory and this.selectedSalary component state
             * 
             * Side Effects:
             * - Clears all text input values in the job posting form
             * - Resets category and salary selection state variables to null
             * - Removes active styling from all category and salary chips
             * - Hides the custom salary input field
             */
            clearPostForm: function() {
                // Clear all text input fields by setting their values to empty strings
                document.getElementById('post-job-title').value = '';
                document.getElementById('post-company').value = '';
                document.getElementById('post-location').value = '';
                document.getElementById('post-company-id').value = '';
                document.getElementById('post-company-email').value = '';
                document.getElementById('post-description').value = '';
                document.getElementById('post-salary-custom').value = '';
                
                // Reset chips
                // Clear selected state variables
                this.selectedCategory = null;
                this.selectedSalary = null;
                // Iterate through all category and salary chips to reset their visual state
                document.querySelectorAll('.category-chip, .salary-chip').forEach(chip => {
                    // Remove active styling classes
                    chip.classList.remove('bg-primary', 'text-white');
                    // Apply default inactive styling
                    chip.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-[#0e121b]', 'dark:text-white');
                });
                
                // Hide the custom salary input field (it becomes visible only when 'custom' is selected)
                document.getElementById('custom-salary-input').classList.add('hidden');
            },
            
            /**
             * Submits a new job posting to the system for approval.
             * 
             * This function collects form data, validates required fields, verifies company existence,
             * constructs a job object with a unique ID, persists it to the data store with 'pending' status,
             * and provides user feedback. Job postings require admin approval before becoming visible.
             * 
             * Dependencies:
             * - DataStore.getCompany(): Validates company ID exists
             * - DataStore.saveJob(): Persists job to data store
             * - UI.showToast(): Displays validation errors and success messages
             * - Admin.loadDashboardData(): Refreshes admin dashboard if admin is logged in
             * 
             * Side Effects:
             * - Creates new job record in data store with 'pending' status
             * - Displays success/error toast notifications
             * - Clears the job posting form on success
             * - Switches view back to job listing
             * - Triggers admin dashboard refresh if company admin is logged in
             * 
             * @returns {void} Returns early with error toast if validation fails
             */
            submitJobPost: function() {
                // Get form values
                // Retrieve and trim all input values to remove extraneous whitespace
                const title = document.getElementById('post-job-title').value.trim();
                const company = document.getElementById('post-company').value.trim();
                const location = document.getElementById('post-location').value.trim();
                const companyId = document.getElementById('post-company-id').value.trim();
                const companyEmail = document.getElementById('post-company-email').value.trim();
                const description = document.getElementById('post-description').value.trim();
                
                // Get salary
                // Process salary based on selection type
                let salary = '';
                if (this.selectedSalary === 'custom') {
                    // User selected custom salary: get value from input field
                    salary = document.getElementById('post-salary-custom').value.trim();
                    // Ensure salary string starts with Nigerian Naira symbol for consistency
                    if (!salary.startsWith('₦')) {
                        salary = '₦' + salary;
                    }
                } else if (this.selectedSalary) {
                    // User selected a predefined salary option
                    salary = this.selectedSalary;
                } else {
                    // No salary selected: use default placeholder
                    salary = '₦0 - ₦0 /yr';
                }
                
                // Validate required fields
                // Check that all mandatory fields have values and a category is selected
                if (!title || !company || !location || !companyId || !companyEmail || !description || !this.selectedCategory) {
                    UI.showToast('Please fill in all required fields', 'error');
                    return;
                }
                
                // Validate company ID exists
                // Verify that the provided company ID corresponds to a registered company
                const companyData = DataStore.getCompany(companyId);
                if (!companyData) {
                    UI.showToast('Invalid Company ID. Please check and try again.', 'error');
                    return;
                }
                
                // Create job object
                /**
                 * Generate a unique job ID using timestamp and random string.
                 * Format: job_[timestamp]_[random string]
                 * This ensures uniqueness across all job postings in the system.
                 */
                const jobId = 'job_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                /**
                 * Construct job data object with all required fields.
                 * This follows the expected schema for DataStore.saveJob().
                 */
                const jobData = {
                    jobId: jobId,                         // Unique identifier for this job
                    companyId: companyId,                 // Reference to the posting company
                    title: title,                         // Job position title
                    companyName: company,                 // Display name of the company
                    location: location,                   // Job location (city, remote, etc.)
                    category: this.selectedCategory,      // Job category for filtering
                    salary: salary,                       // Salary range or specific amount
                    description: description,             // Full job description text
                    companyEmail: companyEmail,           // Contact email for applications
                    postedAt: new Date().toISOString(),   // Timestamp of submission
                    status: 'pending'                    // Requires admin approval before public visibility
                };
                
                // Save job
                // Persist the job data to the central data store
                DataStore.saveJob(jobId, jobData);
                // Notify user that submission was successful and explain next steps
                UI.showToast('Job posted successfully! Awaiting admin approval.', 'success');
                
                // Clear form and switch to listing view
                this.clearPostForm();
                this.showView('listing');
                
                // If admin is logged in, refresh admin dashboard
                // Check if a company admin is currently authenticated
                if (DataStore.getCurrentCompany()) {
                    // Admin is logged in, refresh their dashboard to show the new pending job
                    Admin.loadDashboardData();
                }
            },
            
            /**
             * Saves a job posting as a draft and returns to the listing view.
             * 
             * This is a lightweight function that provides user feedback and navigates away
             * from the posting form without persisting the job data. The actual draft storage
             * mechanism is not implemented in this function; it currently only simulates
             * draft saving with a toast notification.
             * 
             * Note: This function does not currently persist draft data. The toast message
             * indicates local storage, but no actual localStorage API calls are made.
             * 
             * Side Effects:
             * - Displays a success toast notification
             * - Switches the view to 'listing' mode
             * 
             * @todo Implement actual draft persistence if required by business requirements
             */
            saveDraft: function() {
                UI.showToast('Draft saved locally', 'success');
                this.showView('listing');
            }
        };

        // ===== ADMIN DASHBOARD FUNCTIONALITY =====
        /**
         * Admin Dashboard Controller
         * 
         * Handles all company administrator functionality including authentication,
         * company registration, job approval workflows, application review,
         * user management, and analytics dashboard rendering.
         * 
         * This object contains methods for the complete admin lifecycle:
         * - Authentication (sign in, sign up)
         * - Dashboard data loading and statistics
         * - Job approval/rejection workflows
         * - Application review workflows
         * - User management
         * - Analytics (growth rate calculation)
         * 
         * Dependencies:
         * - DataStore: All CRUD operations for companies, jobs, applications, users
         * - UI: Toast notifications and UI utilities
         * - Navigation: Screen switching and hamburger menu integration
         * - SlideOver: Mobile menu component
         * - Home: For refreshing views after state changes
         */
        const Admin = {
            /**
             * Initializes the admin dashboard event listeners and UI setup.
             * 
             * This function must be called when the admin screen becomes visible.
             * It sets up all click and keypress event handlers for authentication tabs,
             * form submissions, and the mobile hamburger menu.
             * 
             * Dependencies:
             * - Assumes all DOM elements referenced exist in the document
             * - Uses SlideOver.open() for mobile menu functionality
             * 
             * Side Effects:
             * - Attaches multiple event listeners to DOM elements
             * - Should only be called once to prevent duplicate listeners
             */
            init: function() {
                // Auth tabs
                // Set up tab switching between sign-in and sign-up forms
                document.getElementById('admin-tab-signin').addEventListener('click', () => this.switchAuthTab('signin'));
                document.getElementById('admin-tab-signup').addEventListener('click', () => this.switchAuthTab('signup'));
                
                // Auth forms
                // Set up submission handlers for both authentication forms
                document.getElementById('admin-signin-submit').addEventListener('click', () => this.signIn());
                document.getElementById('admin-signup-submit').addEventListener('click', () => this.signUp());
                
                // Add user button
                // Set up handler for adding new users to the company (admin function)
                document.getElementById('admin-add-user-btn').addEventListener('click', () => this.addUser());
                
                // Allow Enter key submission
                // Enable keyboard submission for sign-in form
                document.getElementById('admin-signin-password').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.signIn();
                });
                
                // Enable keyboard submission for sign-up form
                document.getElementById('admin-signup-password').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.signUp();
                });
                
                // Hamburger menu for admin screen
                // Set up mobile menu toggle for the admin dashboard
                document.getElementById('admin-hamburger-menu').addEventListener('click', () => SlideOver.open());
            },
            
            /**
             * Switches between the sign-in and sign-up tabs in the admin authentication panel.
             * 
             * This function manages the visual state of authentication tabs and form visibility.
             * It applies active/inactive styling classes and toggles the hidden class on forms.
             * 
             * @param {string} tab - The tab to activate: 'signin' or 'signup'
             * 
             * Side Effects:
             * - Modifies CSS classes on tab buttons to show active/inactive state
             * - Toggles visibility of sign-in and sign-up forms
             */
            switchAuthTab: function(tab) {
                // Get references to tab buttons and forms
                const signinTab = document.getElementById('admin-tab-signin');
                const signupTab = document.getElementById('admin-tab-signup');
                const signinForm = document.getElementById('admin-signin-form');
                const signupForm = document.getElementById('admin-signup-form');
                
                if (tab === 'signin') {
                    // Activate sign-in tab with primary color and bottom border
                    signinTab.classList.add('text-primary', 'border-b-2', 'border-primary');
                    signinTab.classList.remove('text-[#4e6797]', 'dark:text-gray-400');
                    // Deactivate sign-up tab
                    signupTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
                    signupTab.classList.add('text-[#4e6797]', 'dark:text-gray-400');
                    // Show sign-in form, hide sign-up form
                    signinForm.classList.remove('hidden');
                    signupForm.classList.add('hidden');
                } else {
                    // Activate sign-up tab
                    signupTab.classList.add('text-primary', 'border-b-2', 'border-primary');
                    signupTab.classList.remove('text-[#4e6797]', 'dark:text-gray-400');
                    // Deactivate sign-in tab
                    signinTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
                    signinTab.classList.add('text-[#4e6797]', 'dark:text-gray-400');
                    // Show sign-up form, hide sign-in form
                    signupForm.classList.remove('hidden');
                    signinForm.classList.add('hidden');
                }
            },
            
            /**
             * Authenticates a company administrator using email, company ID, and password.
             * 
             * This function validates the sign-in form inputs, verifies credentials against
             * the data store, and establishes an admin session upon successful authentication.
             * 
             * Dependencies:
             * - DataStore.getCompany(): Retrieves company by ID
             * - DataStore.updateCurrentCompany(): Sets the authenticated company session
             * - Navigation.updateAuthUI(): Updates UI to reflect authenticated state
             * - UI.showToast(): Displays success message
             * 
             * Side Effects:
             * - On success: Sets current company in session, clears form, hides error, shows toast
             * - On failure: Displays error message, keeps form populated for correction
             * 
             * @returns {void} Returns early with error display if validation fails
             */
            signIn: function() {
                // Collect form input values and trim whitespace from non-password fields
                const email = document.getElementById('admin-signin-email').value.trim();
                const companyId = document.getElementById('admin-signin-companyid').value.trim();
                const password = document.getElementById('admin-signin-password').value;
                const errorElement = document.getElementById('admin-signin-error');
                
                // Validate that all fields have values
                if (!email || !companyId || !password) {
                    errorElement.textContent = 'Please fill in all fields';
                    errorElement.classList.remove('hidden');
                    return;
                }
                
                // Retrieve company data using the provided Company ID
                const company = DataStore.getCompany(companyId);
                
                /**
                 * Verify credentials:
                 * - Company exists
                 * - Provided email matches the company's admin email
                 * - Provided password matches the stored password
                 * 
                 * Note: Passwords are stored in plain text. In a production environment,
                 * this should be replaced with proper password hashing and comparison.
                 */
                if (company && company.adminEmail === email && company.password === password) {
                    // Authentication successful
                    DataStore.updateCurrentCompany(companyId);
                    Navigation.updateAuthUI();
                    UI.showToast('Admin access granted', 'success');
                    errorElement.classList.add('hidden');
                    
                    // Clear form
                    document.getElementById('admin-signin-email').value = '';
                    document.getElementById('admin-signin-companyid').value = '';
                    document.getElementById('admin-signin-password').value = '';
                } else {
                    // Authentication failed
                    errorElement.textContent = 'Invalid credentials';
                    errorElement.classList.remove('hidden');
                }
            },
            
            /**
             * Registers a new company administrator account.
             * 
             * This function handles company registration by validating form inputs,
             * generating a unique Company ID, creating company and admin user records,
             * and providing the credentials to the user for future sign-in.
             * 
             * Dependencies:
             * - DataStore.saveCompany(): Persists company data
             * - DataStore.addCompanyUser(): Adds admin as first company user
             * - UI.showToast(): Displays success message with Company ID
             * 
             * Side Effects:
             * - Creates new company record in data store
             * - Creates new user record (admin) associated with the company
             * - Displays alert with Company ID (critical for user to save)
             * - Clears form and switches to sign-in tab with credentials pre-filled
             * 
             * @returns {void} Returns early with error display if validation fails
             */
            signUp: function() {
                // Collect and trim form input values
                const companyName = document.getElementById('admin-signup-company').value.trim();
                const email = document.getElementById('admin-signup-email').value.trim();
                const password = document.getElementById('admin-signup-password').value;
                const errorElement = document.getElementById('admin-signup-error');
                
                // Validate that all required fields are filled
                if (!companyName || !email || !password) {
                    errorElement.textContent = 'Please fill in all fields';
                    errorElement.classList.remove('hidden');
                    return;
                }
                
                // Generate unique Company ID
                // Format: comp_[timestamp]_[random string] - ensures global uniqueness
                const companyId = 'comp_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                // Save company
                // Construct company data object with admin credentials
                const companyData = {
                    companyId: companyId,
                    name: companyName,
                    adminEmail: email,
                    password: password  // Note: Plain text password - should be hashed in production
                };
                
                // Persist company data to the data store
                DataStore.saveCompany(companyId, companyData);
                
                // Add admin as first user
                // This creates the admin user record and associates it with the company
                DataStore.addCompanyUser(companyId, email);
                
                // Display success toast with the generated Company ID
                UI.showToast(`Company account created! Your Company ID: ${companyId}`, 'success');
                errorElement.classList.add('hidden');
                
                // Show Company ID to user
                // Critical: Company ID is required for future sign-in and must be saved by the user
                alert(`Company account created successfully!\n\nYour Company ID: ${companyId}\n\nIMPORTANT: Save this Company ID. You'll need it to sign in and post jobs.`);
                
                // Clear form
                document.getElementById('admin-signup-company').value = '';
                document.getElementById('admin-signup-email').value = '';
                document.getElementById('admin-signup-password').value = '';
                
                // Switch to sign-in tab and pre-fill credentials for immediate use
                this.switchAuthTab('signin');
                document.getElementById('admin-signin-email').value = email;
                document.getElementById('admin-signin-companyid').value = companyId;
            },
            
            /**
             * Loads and displays all dashboard data for the authenticated company.
             * 
             * This function fetches company-specific statistics, pending jobs, pending applications,
             * user lists, and calculates growth metrics. It updates multiple UI sections with
             * real-time data about the company's job posting and hiring activities.
             * 
             * Dependencies:
             * - DataStore.getCurrentCompany(): Gets authenticated company session
             * - DataStore.getCompanyJobs(): Retrieves all jobs for this company
             * - DataStore.getCompanyUsers(): Retrieves all users associated with this company
             * - DataStore.getCompanyApplications(): Retrieves all applications for this company's jobs
             * 
             * Side Effects:
             * - Updates multiple DOM elements with statistical values
             * - Triggers rendering of pending jobs list, applications list, and users list
             * - Calculates and displays growth rate
             * 
             * @returns {void} Returns early without action if no company is authenticated
             */
            loadDashboardData: function() {
                // Verify company authentication before loading sensitive data
                const currentCompany = DataStore.getCurrentCompany();
                if (!currentCompany) return;
                
                // Load company jobs
                // Fetch all job postings associated with this company
                const companyJobs = DataStore.getCompanyJobs(currentCompany.companyId);
                
                // Update stats
                // Filter and count approved jobs for display
                const approvedJobs = companyJobs.filter(job => job.status === 'approved');
                document.getElementById('admin-total-jobs').textContent = approvedJobs.length;
                
                // Filter and count pending jobs requiring approval
                const pendingJobs = companyJobs.filter(job => job.status === 'pending');
                document.getElementById('admin-pending-jobs').textContent = pendingJobs.length;
                document.getElementById('admin-pending-count').textContent = `${pendingJobs.length} pending`;
                
                // Load company users
                // Fetch all non-admin users associated with this company
                const companyUsers = DataStore.getCompanyUsers(currentCompany.companyId);
                // Total users = companyUsers count + 1 admin account
                document.getElementById('admin-total-users').textContent = companyUsers.length + 1;
                
                // Load pending jobs for approval
                this.loadPendingJobs(pendingJobs);
                
                // Load pending applications for approval
                this.loadPendingApplications(currentCompany.companyId);
                
                // Load company users list
                this.loadCompanyUsers(companyUsers);
                
                // Calculate and display growth rate
                this.calculateGrowthRate(currentCompany.companyId);
            },
            
            /**
             * Renders the list of pending jobs requiring approval.
             * 
             * This function dynamically creates job approval cards for each pending job,
             * complete with job details and action buttons (Approve/Reject). It handles
             * the empty state when no jobs are pending.
             * 
             * @param {Array} pendingJobs - Array of job objects with status='pending'
             * 
             * Dependencies:
             * - Expects DOM element with ID 'admin-pending-jobs-container' to exist
             * - Uses this.approveJob() and this.rejectJob() as click handlers
             * 
             * Side Effects:
             * - Clears and repopulates the pending jobs container
             * - Creates and attaches new DOM elements with event listeners
             * - Formats dates using toLocaleDateString() for user-friendly display
             */
            loadPendingJobs: function(pendingJobs) {
                const container = document.getElementById('admin-pending-jobs-container');
                container.innerHTML = '';
                
                // Handle empty state
                if (pendingJobs.length === 0) {
                    container.innerHTML = `
                        <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                            <p class="text-gray-500 dark:text-gray-400">No pending jobs for approval</p>
                        </div>
                    `;
                    return;
                }
                
                // Iterate through pending jobs and create cards
                pendingJobs.forEach(job => {
                    const jobCard = document.createElement('div');
                    jobCard.className = 'bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow';
                    jobCard.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h4 class="text-base font-bold text-[#0e121b] dark:text-white">${job.title}</h4>
                                <p class="text-sm font-normal text-[#4e6797] dark:text-gray-400 mt-1">${job.companyName} • ${job.location}</p>
                                <div class="flex items-center justify-between mt-3">
                                    <span class="text-primary font-bold text-sm bg-primary/10 px-3 py-1 rounded-full">${job.salary || 'Not specified'}</span>
                                    <span class="text-xs text-gray-400 uppercase font-semibold">${new Date(job.postedAt).toLocaleDateString()}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3 mt-4">
                            <button class="approve-btn flex-1 h-10 bg-primary text-white text-sm font-bold rounded-full shadow-sm hover:bg-primary/90 active:scale-95 transition-all" data-job-id="${job.jobId}">
                                Approve
                            </button>
                            <button class="reject-btn flex-1 h-10 bg-transparent border-2 border-red-200 text-red-500 text-sm font-bold rounded-full hover:bg-red-50 active:scale-95 transition-all" data-job-id="${job.jobId}">
                                Reject
                            </button>
                        </div>
                    `;
                    
                    // Add event listeners for approve/reject buttons
                    const approveBtn = jobCard.querySelector('.approve-btn');
                    const rejectBtn = jobCard.querySelector('.reject-btn');
                    
                    approveBtn.addEventListener('click', () => this.approveJob(job.jobId, jobCard));
                    rejectBtn.addEventListener('click', () => this.rejectJob(job.jobId, jobCard));
                    
                    container.appendChild(jobCard);
                });
            },
            
            /**
             * Renders the list of pending job applications requiring review.
             * 
             * This function fetches all applications for the company's jobs, filters for
             * pending status, and dynamically creates application review cards. Each card
             * shows applicant details, job information, and approval/rejection actions.
             * 
             * @param {string} companyId - Unique identifier of the authenticated company
             * 
             * Dependencies:
             * - DataStore.getCompanyApplications(): Fetches applications for company jobs
             * - DataStore.getJob(): Retrieves job details for each application
             * - Expects DOM elements with IDs 'admin-pending-apps-container' and 'admin-pending-apps-count'
             * - Uses this.approveApplication() and this.rejectApplication() as click handlers
             * 
             * Side Effects:
             * - Updates the pending applications count badge
             * - Clears and repopulates the pending applications container
             * - Creates and attaches new DOM elements with event listeners
             * - Skips applications where the associated job no longer exists
             */
            loadPendingApplications: function(companyId) {
                // Fetch all applications for this company's jobs
                const applications = DataStore.getCompanyApplications(companyId);
                // Filter to show only applications with pending status
                const pendingApplications = applications.filter(app => app.status === 'pending');
                const container = document.getElementById('admin-pending-apps-container');
                const countElement = document.getElementById('admin-pending-apps-count');
                
                container.innerHTML = '';
                countElement.textContent = `${pendingApplications.length} pending`;
                
                // Handle empty state
                if (pendingApplications.length === 0) {
                    container.innerHTML = `
                        <div class="bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm text-center">
                            <p class="text-gray-500 dark:text-gray-400">No pending applications for approval</p>
                        </div>
                    `;
                    return;
                }
                
                // Iterate through pending applications and create cards
                pendingApplications.forEach(app => {
                    // Verify that the associated job still exists
                    const job = DataStore.getJob(app.jobId);
                    if (!job) return;
                    
                    const appCard = document.createElement('div');
                    appCard.className = 'bg-white dark:bg-gray-900 rounded-xl border border-gray-100 dark:border-gray-800 p-4 shadow-sm hover:shadow-md transition-shadow';
                    appCard.innerHTML = `
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex-1">
                                <h4 class="text-base font-bold text-[#0e121b] dark:text-white">${app.jobTitle}</h4>
                                <p class="text-sm font-normal text-[#4e6797] dark:text-gray-400 mt-1">Applicant: ${app.applicantName} (${app.applicantEmail})</p>
                                <div class="flex items-center justify-between mt-3">
                                    <span class="text-purple-500 font-bold text-sm bg-purple-500/10 px-3 py-1 rounded-full">Applied: ${new Date(app.appliedAt).toLocaleDateString()}</span>
                                    <span class="text-xs text-gray-400 uppercase font-semibold">${job.location}</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex gap-3 mt-4">
                            <button class="approve-app-btn flex-1 h-10 bg-purple-500 text-white text-sm font-bold rounded-full shadow-sm hover:bg-purple-600 active:scale-95 transition-all" data-app-id="${app.applicationId}">
                                Approve
                            </button>
                            <button class="reject-app-btn flex-1 h-10 bg-transparent border-2 border-red-200 text-red-500 text-sm font-bold rounded-full hover:bg-red-50 active:scale-95 transition-all" data-app-id="${app.applicationId}">
                                Reject
                            </button>
                        </div>
                    `;
                    
                    // Add event listeners for approve/reject buttons
                    const approveBtn = appCard.querySelector('.approve-app-btn');
                    const rejectBtn = appCard.querySelector('.reject-app-btn');
                    
                    approveBtn.addEventListener('click', () => this.approveApplication(app.applicationId, appCard));
                    rejectBtn.addEventListener('click', () => this.rejectApplication(app.applicationId, appCard));
                    
                    container.appendChild(appCard);
                });
            },

</body>

</html>




